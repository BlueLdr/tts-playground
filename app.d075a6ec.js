parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"aSor":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=L,exports.hydrate=F,exports.h=exports.createElement=p,exports.Fragment=d,exports.createRef=a,exports.Component=h,exports.cloneElement=H,exports.createContext=O,exports.toChildArray=b,exports.options=exports.isValidElement=void 0;var e,n,t,_,l,o,r={},i=[],u=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function s(e,n){for(var t in n)e[t]=n[t];return e}function c(e){var n=e.parentNode;n&&n.removeChild(e)}function p(e,n,t){var _,l,o,r=arguments,i={};for(o in n)"key"==o?_=n[o]:"ref"==o?l=n[o]:i[o]=n[o];if(arguments.length>3)for(t=[t],o=3;o<arguments.length;o++)t.push(r[o]);if(null!=t&&(i.children=t),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===i[o]&&(i[o]=e.defaultProps[o]);return f(e,i,_,l,null)}function f(n,t,_,l,o){var r={type:n,props:t,key:_,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++e.__v:o};return null!=e.vnode&&e.vnode(r),r}function a(){return{current:null}}function d(e){return e.children}function h(e,n){this.props=e,this.context=n}function v(e,n){if(null==n)return e.__?v(e.__,e.__.__k.indexOf(e)+1):null;for(var t;n<e.__k.length;n++)if(null!=(t=e.__k[n])&&null!=t.__e)return t.__e;return"function"==typeof e.type?v(e):null}function y(e){var n,t;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if(null!=(t=e.__k[n])&&null!=t.__e){e.__e=e.__c.base=t.__e;break}return y(e)}}function m(n){(!n.__d&&(n.__d=!0)&&t.push(n)&&!k.__r++||l!==e.debounceRendering)&&((l=e.debounceRendering)||_)(k)}function k(){for(var e;k.__r=t.length;)e=t.sort(function(e,n){return e.__v.__b-n.__v.__b}),t=[],e.some(function(e){var n,t,_,l,o,r;e.__d&&(o=(l=(n=e).__v).__e,(r=n.__P)&&(t=[],(_=s({},l)).__v=l.__v+1,D(r,l,_,n.__n,void 0!==r.ownerSVGElement,null!=l.__h?[o]:null,t,null==o?v(l):o,l.__h),T(t,l),l.__e!=o&&y(l)))})}function g(e,n,t,_,l,o,u,s,c,p){var a,h,y,m,k,g,b,P=_&&_.__k||i,S=P.length;for(t.__k=[],a=0;a<n.length;a++)if(null!=(m=t.__k[a]=null==(m=n[a])||"boolean"==typeof m?null:"string"==typeof m||"number"==typeof m?f(null,m,null,null,m):Array.isArray(m)?f(d,{children:m},null,null,null):m.__b>0?f(m.type,m.props,m.key,null,m.__v):m)){if(m.__=t,m.__b=t.__b+1,null===(y=P[a])||y&&m.key==y.key&&m.type===y.type)P[a]=void 0;else for(h=0;h<S;h++){if((y=P[h])&&m.key==y.key&&m.type===y.type){P[h]=void 0;break}y=null}D(e,m,y=y||r,l,o,u,s,c,p),k=m.__e,(h=m.ref)&&y.ref!=h&&(b||(b=[]),y.ref&&b.push(y.ref,null,m),b.push(h,m.__c||k,m)),null!=k?(null==g&&(g=k),"function"==typeof m.type&&null!=m.__k&&m.__k===y.__k?m.__d=c=x(m,c,e):c=C(e,m,y,P,k,c),p||"option"!==t.type?"function"==typeof t.type&&(t.__d=c):e.value=""):c&&y.__e==c&&c.parentNode!=e&&(c=v(y))}for(t.__e=g,a=S;a--;)null!=P[a]&&("function"==typeof t.type&&null!=P[a].__e&&P[a].__e==t.__d&&(t.__d=v(_,a+1)),N(P[a],P[a]));if(b)for(a=0;a<b.length;a++)M(b[a],b[++a],b[++a])}function x(e,n,t){var _,l;for(_=0;_<e.__k.length;_++)(l=e.__k[_])&&(l.__=e,n="function"==typeof l.type?x(l,n,t):C(t,l,l,e.__k,l.__e,n));return n}function b(e,n){return n=n||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some(function(e){b(e,n)}):n.push(e)),n}function C(e,n,t,_,l,o){var r,i,u;if(void 0!==n.__d)r=n.__d,n.__d=void 0;else if(null==t||l!=o||null==l.parentNode)e:if(null==o||o.parentNode!==e)e.appendChild(l),r=null;else{for(i=o,u=0;(i=i.nextSibling)&&u<_.length;u+=2)if(i==l)break e;e.insertBefore(l,o),r=o}return void 0!==r?r:l.nextSibling}function P(e,n,t,_,l){var o;for(o in t)"children"===o||"key"===o||o in n||E(e,o,null,t[o],_);for(o in n)l&&"function"!=typeof n[o]||"children"===o||"key"===o||"value"===o||"checked"===o||t[o]===n[o]||E(e,o,n[o],t[o],_)}function S(e,n,t){"-"===n[0]?e.setProperty(n,t):e[n]=null==t?"":"number"!=typeof t||u.test(n)?t:t+"px"}function E(e,n,t,_,l){var o;e:if("style"===n)if("string"==typeof t)e.style.cssText=t;else{if("string"==typeof _&&(e.style.cssText=_=""),_)for(n in _)t&&n in t||S(e.style,n,"");if(t)for(n in t)_&&t[n]===_[n]||S(e.style,n,t[n])}else if("o"===n[0]&&"n"===n[1])o=n!==(n=n.replace(/Capture$/,"")),n=n.toLowerCase()in e?n.toLowerCase().slice(2):n.slice(2),e.l||(e.l={}),e.l[n+o]=t,t?_||e.addEventListener(n,o?U:w,o):e.removeEventListener(n,o?U:w,o);else if("dangerouslySetInnerHTML"!==n){if(l)n=n.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==n&&"list"!==n&&"form"!==n&&"download"!==n&&n in e)try{e[n]=null==t?"":t;break e}catch(e){}"function"==typeof t||(null!=t&&(!1!==t||"a"===n[0]&&"r"===n[1])?e.setAttribute(n,t):e.removeAttribute(n))}}function w(n){this.l[n.type+!1](e.event?e.event(n):n)}function U(n){this.l[n.type+!0](e.event?e.event(n):n)}function D(n,t,_,l,o,r,i,u,c){var p,f,a,v,y,m,k,x,b,C,P,S=t.type;if(void 0!==t.constructor)return null;null!=_.__h&&(c=_.__h,u=t.__e=_.__e,t.__h=null,r=[u]),(p=e.__b)&&p(t);try{e:if("function"==typeof S){if(x=t.props,b=(p=S.contextType)&&l[p.__c],C=p?b?b.props.value:p.__:l,_.__c?k=(f=t.__c=_.__c).__=f.__E:("prototype"in S&&S.prototype.render?t.__c=f=new S(x,C):(t.__c=f=new h(x,C),f.constructor=S,f.render=W),b&&b.sub(f),f.props=x,f.state||(f.state={}),f.context=C,f.__n=l,a=f.__d=!0,f.__h=[]),null==f.__s&&(f.__s=f.state),null!=S.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=s({},f.__s)),s(f.__s,S.getDerivedStateFromProps(x,f.__s))),v=f.props,y=f.state,a)null==S.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(null==S.getDerivedStateFromProps&&x!==v&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(x,C),!f.__e&&null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(x,f.__s,C)||t.__v===_.__v){f.props=x,f.state=f.__s,t.__v!==_.__v&&(f.__d=!1),f.__v=t,t.__e=_.__e,t.__k=_.__k,f.__h.length&&i.push(f);break e}null!=f.componentWillUpdate&&f.componentWillUpdate(x,f.__s,C),null!=f.componentDidUpdate&&f.__h.push(function(){f.componentDidUpdate(v,y,m)})}f.context=C,f.props=x,f.state=f.__s,(p=e.__r)&&p(t),f.__d=!1,f.__v=t,f.__P=n,p=f.render(f.props,f.state,f.context),f.state=f.__s,null!=f.getChildContext&&(l=s(s({},l),f.getChildContext())),a||null==f.getSnapshotBeforeUpdate||(m=f.getSnapshotBeforeUpdate(v,y)),P=null!=p&&p.type===d&&null==p.key?p.props.children:p,g(n,Array.isArray(P)?P:[P],t,_,l,o,r,i,u,c),f.base=t.__e,t.__h=null,f.__h.length&&i.push(f),k&&(f.__E=f.__=null),f.__e=!1}else null==r&&t.__v===_.__v?(t.__k=_.__k,t.__e=_.__e):t.__e=A(_.__e,t,_,l,o,r,i,c);(p=e.diffed)&&p(t)}catch(n){t.__v=null,(c||null!=r)&&(t.__e=u,t.__h=!!c,r[r.indexOf(u)]=null),e.__e(n,t,_)}}function T(n,t){e.__c&&e.__c(t,n),n.some(function(t){try{n=t.__h,t.__h=[],n.some(function(e){e.call(t)})}catch(n){e.__e(n,t.__v)}})}function A(e,n,t,_,l,o,u,s){var p,f,a,d,h=t.props,v=n.props,y=n.type,m=0;if("svg"===y&&(l=!0),null!=o)for(;m<o.length;m++)if((p=o[m])&&(p===e||(y?p.localName==y:3==p.nodeType))){e=p,o[m]=null;break}if(null==e){if(null===y)return document.createTextNode(v);e=l?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,v.is&&v),o=null,s=!1}if(null===y)h===v||s&&e.data===v||(e.data=v);else{if(o=o&&i.slice.call(e.childNodes),f=(h=t.props||r).dangerouslySetInnerHTML,a=v.dangerouslySetInnerHTML,!s){if(null!=o)for(h={},d=0;d<e.attributes.length;d++)h[e.attributes[d].name]=e.attributes[d].value;(a||f)&&(a&&(f&&a.__html==f.__html||a.__html===e.innerHTML)||(e.innerHTML=a&&a.__html||""))}if(P(e,v,h,l,s),a)n.__k=[];else if(m=n.props.children,g(e,Array.isArray(m)?m:[m],n,t,_,l&&"foreignObject"!==y,o,u,e.firstChild,s),null!=o)for(m=o.length;m--;)null!=o[m]&&c(o[m]);s||("value"in v&&void 0!==(m=v.value)&&(m!==e.value||"progress"===y&&!m)&&E(e,"value",m,h.value,!1),"checked"in v&&void 0!==(m=v.checked)&&m!==e.checked&&E(e,"checked",m,h.checked,!1))}return e}function M(n,t,_){try{"function"==typeof n?n(t):n.current=t}catch(n){e.__e(n,_)}}function N(n,t,_){var l,o,r;if(e.unmount&&e.unmount(n),(l=n.ref)&&(l.current&&l.current!==n.__e||M(l,null,t)),_||"function"==typeof n.type||(_=null!=(o=n.__e)),n.__e=n.__d=void 0,null!=(l=n.__c)){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(n){e.__e(n,t)}l.base=l.__P=null}if(l=n.__k)for(r=0;r<l.length;r++)l[r]&&N(l[r],t,_);null!=o&&c(o)}function W(e,n,t){return this.constructor(e,t)}function L(n,t,_){var l,o,u;e.__&&e.__(n,t),o=(l="function"==typeof _)?null:_&&_.__k||t.__k,u=[],D(t,n=(!l&&_||t).__k=p(d,null,[n]),o||r,r,void 0!==t.ownerSVGElement,!l&&_?[_]:o?null:t.firstChild?i.slice.call(t.childNodes):null,u,!l&&_?_:o?o.__e:t.firstChild,l),T(u,n)}function F(e,n){L(e,n,F)}function H(e,n,t){var _,l,o,r=arguments,i=s({},e.props);for(o in n)"key"==o?_=n[o]:"ref"==o?l=n[o]:i[o]=n[o];if(arguments.length>3)for(t=[t],o=3;o<arguments.length;o++)t.push(r[o]);return null!=t&&(i.children=t),f(e.type,i,_||e.key,l||e.ref,null)}function O(e,n){var t={__c:n="__cC"+o++,__:e,Consumer:function(e,n){return e.children(n)},Provider:function(e){var t,_;return this.getChildContext||(t=[],(_={})[n]=this,this.getChildContext=function(){return _},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&t.some(m)},this.sub=function(e){t.push(e);var n=e.componentWillUnmount;e.componentWillUnmount=function(){t.splice(t.indexOf(e),1),n&&n.call(e)}}),e.children}};return t.Provider.__=t.Consumer.contextType=t}exports.isValidElement=n,exports.options=e,exports.options=e={__e:function(e,n){for(var t,_,l;n=n.__;)if((t=n.__c)&&!t.__)try{if((_=t.constructor)&&null!=_.getDerivedStateFromError&&(t.setState(_.getDerivedStateFromError(e)),l=t.__d),null!=t.componentDidCatch&&(t.componentDidCatch(e),l=t.__d),l)return t.__E=t}catch(n){e=n}throw e},__v:0},exports.isValidElement=n=function(e){return null!=e&&void 0===e.constructor},h.prototype.setState=function(e,n){var t;t=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=s({},this.state),"function"==typeof e&&(e=e(s({},t),this.props)),e&&s(t,e),null!=e&&this.__v&&(n&&this.__h.push(n),m(this))},h.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),m(this))},h.prototype.render=d,t=[],_="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,k.__r=0,o=0;
},{}],"nR5O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addHookName=o;var e=require("preact");function o(o,t){return e.options.__a&&e.options.__a(t),o}"undefined"!=typeof window&&window.__PREACT_DEVTOOLS__&&window.__PREACT_DEVTOOLS__.attachPreact("10.5.12",e.options,{Fragment:e.Fragment,Component:e.Component});
},{"preact":"aSor"}],"jYgX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resetPropWarnings=t;var e=require("preact");require("preact/devtools");var n={};function t(){n={}}function o(n){return n.type===e.Fragment?"Fragment":"function"==typeof n.type?n.type.displayName||n.type.name:"string"==typeof n.type?n.type:"#text"}var r=[],a=[];function i(){return r.length>0?r[r.length-1]:null}var p=!1;function s(n){return"function"==typeof n.type&&n.type!=e.Fragment}function c(e){for(var n=[e],t=e;null!=t.__o;)n.push(t.__o),t=t.__o;return n.reduce(function(e,n){e+="  in "+o(n);var t=n.__source;return t?e+=" (at "+t.fileName+":"+t.lineNumber+")":p||(p=!0,console.warn("Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons.")),e+"\n"},"")}var l="function"==typeof WeakMap,u=e.Component.prototype.setState;e.Component.prototype.setState=function(e,n){return null==this.__v?null==this.state&&console.warn('Calling "this.setState" inside the constructor of a component is a no-op and might be a bug in your application. Instead, set "this.state = {}" directly.\n\n'+c(i())):null==this.__P&&console.warn('Can\'t call "this.setState" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.\n\n'+c(this.__v)),u.call(this,e,n)};var f=e.Component.prototype.forceUpdate;function d(e){var n=e.props,t=o(e),r="";for(var a in n)if(n.hasOwnProperty(a)&&"children"!==a){var i=n[a];"function"==typeof i&&(i="function "+(i.displayName||i.name)+"() {}"),i=Object(i)!==i||i.toString?i+"":Object.prototype.toString.call(i),r+=" "+a+"="+JSON.stringify(i)}var p=n.children;return"<"+t+r+(p&&p.length?">..</"+t+">":" />")}e.Component.prototype.forceUpdate=function(e){return null==this.__v?console.warn('Calling "this.forceUpdate" inside the constructor of a component is a no-op and might be a bug in your application.\n\n'+c(i())):null==this.__P&&console.warn('Can\'t call "this.forceUpdate" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.\n\n'+c(this.__v)),f.call(this,e)},function(){!function(){var n=e.options.__b,t=e.options.diffed,o=e.options.__,i=e.options.vnode,p=e.options.__r;e.options.diffed=function(e){s(e)&&a.pop(),r.pop(),t&&t(e)},e.options.__b=function(e){s(e)&&r.push(e),n&&n(e)},e.options.__=function(e,n){a=[],o&&o(e,n)},e.options.vnode=function(e){e.__o=a.length>0?a[a.length-1]:null,i&&i(e)},e.options.__r=function(e){s(e)&&a.push(e),p&&p(e)}}();var t=!1,i=e.options.__b,p=e.options.diffed,u=e.options.vnode,f=e.options.__e,y=e.options.__,h=e.options.__h,_=l?{useEffect:new WeakMap,useLayoutEffect:new WeakMap,lazyPropTypes:new WeakMap}:null,m=[];e.options.__e=function(e,n,t){if(n&&n.__c&&"function"==typeof e.then){var r=e;e=new Error("Missing Suspense. The throwing component was: "+o(n));for(var a=n;a;a=a.__)if(a.__c&&a.__c.__c){e=r;break}if(e instanceof Error)throw e}try{f(e,n,t),"function"!=typeof e.then&&setTimeout(function(){throw e})}catch(e){throw e}},e.options.__=function(e,n){if(!n)throw new Error("Undefined parent passed to render(), this is the second argument.\nCheck if the element is available in the DOM/has the correct id.");var t;switch(n.nodeType){case 1:case 11:case 9:t=!0;break;default:t=!1}if(!t){var r=o(e);throw new Error("Expected a valid HTML node as a second argument to render.\tReceived "+n+" instead: render(<"+r+" />, "+n+");")}y&&y(e,n)},e.options.__b=function(e){var r=e.type,a=function e(n){return n?"function"==typeof n.type?e(n.__):n:{}}(e.__);if(t=!0,void 0===r)throw new Error("Undefined component passed to createElement()\n\nYou likely forgot to export your component or might have mixed up default and named imports"+d(e)+"\n\n"+c(e));if(null!=r&&"object"==typeof r){if(void 0!==r.__k&&void 0!==r.__e)throw new Error("Invalid type passed to createElement(): "+r+"\n\nDid you accidentally pass a JSX literal as JSX twice?\n\n  let My"+o(e)+" = "+d(r)+";\n  let vnode = <My"+o(e)+" />;\n\nThis usually happens when you export a JSX literal and not the component.\n\n"+c(e));throw new Error("Invalid type passed to createElement(): "+(Array.isArray(r)?"array":r))}if("thead"!==r&&"tfoot"!==r&&"tbody"!==r||"table"===a.type?"tr"===r&&"thead"!==a.type&&"tfoot"!==a.type&&"tbody"!==a.type&&"table"!==a.type?console.error("Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot/table> parent."+d(e)+"\n\n"+c(e)):"td"===r&&"tr"!==a.type?console.error("Improper nesting of table. Your <td> should have a <tr> parent."+d(e)+"\n\n"+c(e)):"th"===r&&"tr"!==a.type&&console.error("Improper nesting of table. Your <th> should have a <tr>."+d(e)+"\n\n"+c(e)):console.error("Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent."+d(e)+"\n\n"+c(e)),void 0!==e.ref&&"function"!=typeof e.ref&&"object"!=typeof e.ref&&!("$$typeof"in e))throw new Error('Component\'s "ref" property should be a function, or an object created by createRef(), but got ['+typeof e.ref+"] instead\n"+d(e)+"\n\n"+c(e));if("string"==typeof e.type)for(var p in e.props)if("o"===p[0]&&"n"===p[1]&&"function"!=typeof e.props[p]&&null!=e.props[p])throw new Error("Component's \""+p+'" property should be a function, but got ['+typeof e.props[p]+"] instead\n"+d(e)+"\n\n"+c(e));if("function"==typeof e.type&&e.type.propTypes){if("Lazy"===e.type.displayName&&_&&!_.lazyPropTypes.has(e.type)){var s="PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ";try{var l=e.type();_.lazyPropTypes.set(e.type,!0),console.warn(s+"Component wrapped in lazy() is "+o(l))}catch(e){console.warn(s+"We will log the wrapped component's name once it is loaded.")}}var u=e.props;e.type.__f&&delete(u=function(e,n){for(var t in n)e[t]=n[t];return e}({},u)).ref,function(e,t,o,r,a){Object.keys(e).forEach(function(o){var i;try{i=e[o](t,o,r,"prop",null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){i=e}!i||i.message in n||(n[i.message]=!0,console.error("Failed prop type: "+i.message+(a&&"\n"+a()||"")))})}(e.type.propTypes,u,0,o(e),function(){return c(e)})}i&&i(e)},e.options.__h=function(e,n,o){if(!e||!t)throw new Error("Hook can only be invoked from render methods.");h&&h(e,n,o)};var v=function(e,n){return{get:function(){var t="get"+e+n;m&&m.indexOf(t)<0&&(m.push(t),console.warn("getting vnode."+e+" is deprecated, "+n))},set:function(){var t="set"+e+n;m&&m.indexOf(t)<0&&(m.push(t),console.warn("setting vnode."+e+" is not allowed, "+n))}}},b={nodeName:v("nodeName","use vnode.type"),attributes:v("attributes","use vnode.props"),children:v("children","use vnode.props.children")},w=Object.create({},b);e.options.vnode=function(e){var n=e.props;if(null!==e.type&&null!=n&&("__source"in n||"__self"in n)){var t=e.props={};for(var o in n){var r=n[o];"__source"===o?e.__source=r:"__self"===o?e.__self=r:t[o]=r}}e.__proto__=w,u&&u(e)},e.options.diffed=function(e){if(e.__k&&e.__k.forEach(function(n){if(n&&void 0===n.type){delete n.__,delete n.__b;var t=Object.keys(n).join(",");throw new Error("Objects are not valid as a child. Encountered an object with the keys {"+t+"}.\n\n"+c(e))}}),t=!1,p&&p(e),null!=e.__k)for(var n=[],o=0;o<e.__k.length;o++){var r=e.__k[o];if(r&&null!=r.key){var a=r.key;if(-1!==n.indexOf(a)){console.error('Following component has two or more children with the same key attribute: "'+a+'". This may cause glitches and misbehavior in rendering process. Component: \n\n'+d(e)+"\n\n"+c(e));break}n.push(a)}}}}();
},{"preact":"aSor","preact/devtools":"nR5O"}],"nWoM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.App=void 0;var e=n(require("preact")),t=require("~/view/components");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}return o.default=e,n&&n.set(e,o),o}var o=function(){return e.h(t.WithGlobalContexts,null,e.h(t.WithContextHooks,null,e.h(t.View,null),e.h("textarea",{id:"clipboard-input",className:"clipboard-input invisible",tabIndex:-1}),e.h("div",{id:"modal-container",className:"modal-container"})))};exports.App=o;
},{"preact":"aSor","~/view/components":"AOf9"}],"MwGB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useState=p,exports.useReducer=h,exports.useEffect=v,exports.useLayoutEffect=l,exports.useRef=m,exports.useImperativeHandle=H,exports.useMemo=d,exports.useCallback=x,exports.useContext=y,exports.useDebugValue=E,exports.useErrorBoundary=b;var _,n,t,o=require("preact"),e=0,u=[],r=o.options.__b,i=o.options.__r,c=o.options.diffed,s=o.options.__c,f=o.options.unmount;function a(_,t){o.options.__h&&o.options.__h(n,_,e||t),e=0;var u=n.__H||(n.__H={__:[],__h:[]});return _>=u.__.length&&u.__.push({}),u.__[_]}function p(_){return e=1,h(C,_)}function h(t,o,e){var u=a(_++,2);return u.t=t,u.__c||(u.__=[e?e(o):C(void 0,o),function(_){var n=u.t(u.__[0],_);u.__[0]!==n&&(u.__=[n,u.__[1]],u.__c.setState({}))}],u.__c=n),u.__}function v(t,e){var u=a(_++,3);!o.options.__s&&F(u.__H,e)&&(u.__=t,u.__H=e,n.__H.__h.push(u))}function l(t,e){var u=a(_++,4);!o.options.__s&&F(u.__H,e)&&(u.__=t,u.__H=e,n.__h.push(u))}function m(_){return e=5,d(function(){return{current:_}},[])}function H(_,n,t){e=6,l(function(){"function"==typeof _?_(n()):_&&(_.current=n())},null==t?t:t.concat(_))}function d(n,t){var o=a(_++,7);return F(o.__H,t)&&(o.__=n(),o.__H=t,o.__h=n),o.__}function x(_,n){return e=8,d(function(){return _},n)}function y(t){var o=n.context[t.__c],e=a(_++,9);return e.__c=t,o?(null==e.__&&(e.__=!0,o.sub(n)),o.props.value):t.__}function E(_,n){o.options.useDebugValue&&o.options.useDebugValue(n?n(_):_)}function b(t){var o=a(_++,10),e=p();return o.__=t,n.componentDidCatch||(n.componentDidCatch=function(_){o.__&&o.__(_),e[1](_)}),[e[0],function(){e[1](void 0)}]}function g(){u.forEach(function(_){if(_.__P)try{_.__H.__h.forEach(A),_.__H.__h.forEach(D),_.__H.__h=[]}catch(n){_.__H.__h=[],o.options.__e(n,_.__v)}}),u=[]}o.options.__b=function(_){n=null,r&&r(_)},o.options.__r=function(t){i&&i(t),_=0;var o=(n=t.__c).__H;o&&(o.__h.forEach(A),o.__h.forEach(D),o.__h=[])},o.options.diffed=function(_){c&&c(_);var e=_.__c;e&&e.__H&&e.__H.__h.length&&(1!==u.push(e)&&t===o.options.requestAnimationFrame||((t=o.options.requestAnimationFrame)||function(_){var n,t=function(){clearTimeout(o),q&&cancelAnimationFrame(n),setTimeout(_)},o=setTimeout(t,100);q&&(n=requestAnimationFrame(t))})(g)),n=void 0},o.options.__c=function(_,n){n.some(function(_){try{_.__h.forEach(A),_.__h=_.__h.filter(function(_){return!_.__||D(_)})}catch(t){n.some(function(_){_.__h&&(_.__h=[])}),n=[],o.options.__e(t,_.__v)}}),s&&s(_,n)},o.options.unmount=function(_){f&&f(_);var n=_.__c;if(n&&n.__H)try{n.__H.__.forEach(A)}catch(_){o.options.__e(_,n.__v)}};var q="function"==typeof requestAnimationFrame;function A(_){var t=n;"function"==typeof _.__c&&_.__c(),n=t}function D(_){var t=n;_.__c=_.__(),n=t}function F(_,n){return!_||_.length!==n.length||n.some(function(n,t){return n!==_[t]})}function C(_,n){return"function"==typeof n?n(_):n}
},{"preact":"aSor"}],"AQ6k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={version:!0,Children:!0,render:!0,hydrate:!0,unmountComponentAtNode:!0,createPortal:!0,createFactory:!0,cloneElement:!0,isValidElement:!0,findDOMNode:!0,PureComponent:!0,memo:!0,forwardRef:!0,unstable_batchedUpdates:!0,StrictMode:!0,Suspense:!0,SuspenseList:!0,lazy:!0,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:!0,unstable_ImmediatePriority:!0,unstable_UserBlockingPriority:!0,unstable_NormalPriority:!0,unstable_LowPriority:!0,unstable_IdlePriority:!0,unstable_runWithPriority:!0,unstable_now:!0,createElement:!0,createContext:!0,createRef:!0,Fragment:!0,Component:!0};exports.render=O,exports.hydrate=g,exports.unmountComponentAtNode=Y,exports.createPortal=x,exports.createFactory=$,exports.cloneElement=H,exports.isValidElement=z,exports.findDOMNode=q,exports.PureComponent=i,exports.memo=u,exports.forwardRef=_,exports.Suspense=f,exports.SuspenseList=h,exports.lazy=m,exports.unstable_runWithPriority=j,Object.defineProperty(exports,"createElement",{enumerable:!0,get:function(){return n.createElement}}),Object.defineProperty(exports,"createContext",{enumerable:!0,get:function(){return n.createContext}}),Object.defineProperty(exports,"createRef",{enumerable:!0,get:function(){return n.createRef}}),Object.defineProperty(exports,"Fragment",{enumerable:!0,get:function(){return n.Fragment}}),Object.defineProperty(exports,"Component",{enumerable:!0,get:function(){return n.Component}}),exports.unstable_now=exports.unstable_IdlePriority=exports.unstable_LowPriority=exports.unstable_NormalPriority=exports.unstable_UserBlockingPriority=exports.unstable_ImmediatePriority=exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=exports.StrictMode=exports.unstable_batchedUpdates=exports.Children=exports.version=exports.default=void 0;var t=require("preact/hooks");Object.keys(t).forEach(function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(e,n)||n in exports&&exports[n]===t[n]||Object.defineProperty(exports,n,{enumerable:!0,get:function(){return t[n]}}))});var n=require("preact");function r(e,t){for(var n in t)e[n]=t[n];return e}function o(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function i(e){this.props=e}function u(e,t){function r(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:o(this.props,e)}function i(t){return this.shouldComponentUpdate=r,(0,n.createElement)(e,t)}return i.displayName="Memo("+(e.displayName||e.name)+")",i.prototype.isReactComponent=!0,i.__f=!0,i}(i.prototype=new n.Component).isPureReactComponent=!0,i.prototype.shouldComponentUpdate=function(e,t){return o(this.props,e)||o(this.state,t)};var l=n.options.__b;n.options.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),l&&l(e)};var a="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function _(e){function t(t,n){var o=r({},t);return delete o.ref,e(o,(n=t.ref||n)&&("object"!=typeof n||"current"in n)?n:null)}return t.$$typeof=a,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var c=function(e,t){return null==e?null:(0,n.toChildArray)((0,n.toChildArray)(e).map(t))},s={map:c,forEach:c,count:function(e){return e?(0,n.toChildArray)(e).length:0},only:function(e){var t=(0,n.toChildArray)(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:n.toChildArray},p=n.options.__e;function f(){this.__u=0,this.t=null,this.__b=null}function d(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function m(e){var t,r,o;function i(i){if(t||(t=e()).then(function(e){r=e.default||e},function(e){o=e}),o)throw o;if(!r)throw t;return(0,n.createElement)(r,i)}return i.displayName="Lazy",i.__f=!0,i}function h(){this.u=null,this.o=null}exports.Children=s,n.options.__e=function(e,t,n){if(e.then)for(var r,o=t;o=o.__;)if((r=o.__c)&&r.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t);p(e,t,n)},(f.prototype=new n.Component).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var o=d(r.__v),i=!1,u=function(){i||(i=!0,n.componentWillUnmount=n.__c,o?o(l):l())};n.__c=n.componentWillUnmount,n.componentWillUnmount=function(){u(),n.__c&&n.__c()};var l=function(){if(!--r.__u){if(r.state.__e){var e=r.state.__e;r.__v.__k[0]=function e(t,n,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(t){return e(t,n,r)}),t.__c&&t.__c.__P===n&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__e:r.__b=null});t=r.t.pop();)t.forceUpdate()}},a=!0===t.__h;r.__u++||a||r.setState({__e:r.__b=r.__v.__k[0]}),e.then(u,u)},f.prototype.componentWillUnmount=function(){this.t=[]},f.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var o=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=function e(t,n,o){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(e){"function"==typeof e.__c&&e.__c()}),t.__c.__H=null),null!=(t=r({},t)).__c&&(t.__c.__P===o&&(t.__c.__P=n),t.__c=null),t.__k=t.__k&&t.__k.map(function(t){return e(t,n,o)})),t}(this.__b,o,i.__O=i.__P)}this.__b=null}var u=t.__e&&(0,n.createElement)(n.Fragment,null,e.fallback);return u&&(u.__h=null),[(0,n.createElement)(n.Fragment,null,t.__e?null:e.children),u]};var y=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function v(e){return this.getChildContext=function(){return e.context},e.children}function b(e){var t=this,r=e.i;t.componentWillUnmount=function(){(0,n.render)(null,t.l),t.l=null,t.i=null},t.i&&t.i!==r&&t.componentWillUnmount(),e.__v?(t.l||(t.i=r,t.l={nodeType:1,parentNode:r,childNodes:[],appendChild:function(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),(0,n.render)((0,n.createElement)(v,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function x(e,t){return(0,n.createElement)(b,{__v:e,i:t})}(h.prototype=new n.Component).__e=function(e){var t=this,n=d(t.__v),r=t.o.get(e);return r[0]++,function(o){var i=function(){t.props.revealOrder?(r.push(o),y(t,e,r)):o()};n?n(i):i()}},h.prototype.render=function(e){this.u=null,this.o=new Map;var t=(0,n.toChildArray)(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var r=t.length;r--;)this.o.set(t[r],this.u=[1,0,this.u]);return e.children},h.prototype.componentDidUpdate=h.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){y(e,n,t)})};var C="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,E=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,P=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(e)};function O(e,t,r){return null==t.__k&&(t.textContent=""),(0,n.render)(e,t),"function"==typeof r&&r(),e?e.__c:null}function g(e,t,r){return(0,n.hydrate)(e,t),"function"==typeof r&&r(),e?e.__c:null}n.Component.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(n.Component.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var N=n.options.event;function R(){}function S(){return this.cancelBubble}function U(){return this.defaultPrevented}n.options.event=function(e){return N&&(e=N(e)),e.persist=R,e.isPropagationStopped=S,e.isDefaultPrevented=U,e.nativeEvent=e};var k,w={configurable:!0,get:function(){return this.class}},L=n.options.vnode;n.options.vnode=function(e){var t=e.type,r=e.props,o=r;if("string"==typeof t){for(var i in o={},r){var u=r[i];"value"===i&&"defaultValue"in r&&null==u||("defaultValue"===i&&"value"in r&&null==r.value?i="value":"download"===i&&!0===u?u="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+t)&&!P(r.type)?i="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(i)?i=i.toLowerCase():E.test(i)?i=i.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===u&&(u=void 0),o[i]=u)}"select"==t&&o.multiple&&Array.isArray(o.value)&&(o.value=(0,n.toChildArray)(r.children).forEach(function(e){e.props.selected=-1!=o.value.indexOf(e.props.value)})),"select"==t&&null!=o.defaultValue&&(o.value=(0,n.toChildArray)(r.children).forEach(function(e){e.props.selected=o.multiple?-1!=o.defaultValue.indexOf(e.props.value):o.defaultValue==e.props.value})),e.props=o}t&&r.class!=r.className&&(w.enumerable="className"in r,null!=r.className&&(o.class=r.className),Object.defineProperty(o,"className",w)),e.$$typeof=C,L&&L(e)};var A=n.options.__r;n.options.__r=function(e){A&&A(e),k=e.__c};var I={ReactCurrentDispatcher:{current:{readContext:function(e){return k.__n[e.__c].props.value}}}},D=1,F=2,W=3,T=4,M=5;function j(e,t){return t()}exports.unstable_IdlePriority=M,exports.unstable_LowPriority=T,exports.unstable_NormalPriority=W,exports.unstable_UserBlockingPriority=F,exports.unstable_ImmediatePriority=D,exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I;var B="object"==typeof performance&&"function"==typeof performance.now?performance.now.bind(performance):function(){return Date.now()},V="16.8.0";function $(e){return n.createElement.bind(null,e)}function z(e){return!!e&&e.$$typeof===C}function H(e){return z(e)?n.cloneElement.apply(null,arguments):e}function Y(e){return!!e.__k&&((0,n.render)(null,e),!0)}function q(e){return e&&(e.base||1===e.nodeType&&e)||null}exports.version=V,exports.unstable_now=B;var Z=function(e,t){return e(t)},G=n.Fragment;exports.StrictMode=G,exports.unstable_batchedUpdates=Z;var J={useState:t.useState,useReducer:t.useReducer,useEffect:t.useEffect,useLayoutEffect:t.useLayoutEffect,useRef:t.useRef,useImperativeHandle:t.useImperativeHandle,useMemo:t.useMemo,useCallback:t.useCallback,useContext:t.useContext,useDebugValue:t.useDebugValue,version:"16.8.0",Children:s,render:O,hydrate:g,unmountComponentAtNode:Y,createPortal:x,createElement:n.createElement,createContext:n.createContext,createFactory:$,cloneElement:H,createRef:n.createRef,Fragment:n.Fragment,isValidElement:z,findDOMNode:q,Component:n.Component,PureComponent:i,memo:u,forwardRef:_,unstable_batchedUpdates:Z,StrictMode:n.Fragment,Suspense:f,SuspenseList:h,lazy:m,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:I};exports.default=J;
},{"preact/hooks":"MwGB","preact":"aSor"}],"R0Pm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VOICE_NAMES=void 0;var e=["Brian","Amy","Emma","Joanna","Kendra","Kimberly","Salli","Joey","Matthew","Geraint"];exports.VOICE_NAMES=e;
},{}],"bIZv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.set_stored_state=exports.get_stored_state=exports.set_stored_messages=exports.get_stored_messages=exports.set_stored_scratch=exports.get_stored_scratch=void 0;var t=function(){return(t=Object.assign||function(t){for(var e,r=1,s=arguments.length;r<s;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},e=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(r[s[o]]=t[s[o]])}return r},r=function(){return(JSON.parse(localStorage.getItem("tts-scratch"))||[]).map(function(r){return t(t({},r),{data:r.data.map(function(r){var s,o=null!==(s=r.options)&&void 0!==s?s:{},a=o.defaultCount,n=e(o,["defaultCount"]),c=t(t({},r),{options:n});return isNaN(parseInt(a))||(c.options.defaultCount=parseInt(a)),c})})})};exports.get_stored_scratch=r;var s=function(t){return localStorage.setItem("tts-scratch",JSON.stringify(t))};exports.set_stored_scratch=s;var o=function(){return JSON.parse(localStorage.getItem("tts-messages"))};exports.get_stored_messages=o;var a=function(t){return localStorage.setItem("tts-messages",JSON.stringify(t))};exports.set_stored_messages=a;var n=function(){return JSON.parse(localStorage.getItem("tts-state"))};exports.get_stored_state=n;var c=function(t){return localStorage.setItem("tts-state",JSON.stringify(t))};exports.set_stored_state=c;
},{}],"y1NU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.play_audio=exports.get_tts_data=exports.TTS_URL=void 0;var e=function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,c)}s((n=n.apply(e,t||[])).next())})},t=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(c){a=[6,c],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},r=function(e){return void 0===e&&(e="Brian"),"https://api.streamelements.com/kappa/v2/speech?voice="+e+"&text="};exports.TTS_URL=r;var n={text:"",promise:new Promise(function(){}),data:""},o=function(o,a,i){return void 0===a&&(a=n),void 0===i&&(i="Brian"),e(void 0,void 0,Promise,function(){var e,n,c;return t(this,function(t){switch(t.label){case 0:return o?(console.log("voice: ",i),console.log("previous voice",a.text.split(":")[0]),i+":"+o===a.text&&a.promise?[4,a.promise]:[3,2]):[2,Promise.reject()];case 1:return e=t.sent(),[3,4];case 2:return a.text=i+":"+o,a.data="",[4,fetch(r(i)+encodeURIComponent(o.trim()))];case 3:e=t.sent(),a.promise=e,t.label=4;case 4:return 200==e.status?[3,6]:(n=alert,[4,e.text()]);case 5:return n.apply(void 0,[t.sent()]),a.text="",[2,Promise.reject(e.error())];case 6:return a.data?[3,8]:[4,e.blob()];case 7:c=t.sent(),a.data=URL.createObjectURL(c),t.label=8;case 8:return[2,a.data]}})})};exports.get_tts_data=o;var a=function(e){var t=document.getElementById(e?e+"-audio":"audio");t instanceof HTMLAudioElement&&(t.pause(),t.load(),t.play())};exports.play_audio=a;
},{}],"rTqy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./constants");Object.keys(e).forEach(function(t){"default"!==t&&"__esModule"!==t&&(t in exports&&exports[t]===e[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}}))});var t=require("./storage");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var r=require("./tts");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});
},{"./constants":"R0Pm","./storage":"bIZv","./tts":"y1NU"}],"uIaN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.INITIAL_STATE=void 0;var e=o(require("~/common"));function t(e){if("function"!=typeof WeakMap)return null;var o=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:o})(e)}function o(e,o){if(!o&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(o);if(n&&n.has(e))return n.get(e);var l={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var u=i?Object.getOwnPropertyDescriptor(e,r):null;u&&(u.get||u.set)?Object.defineProperty(l,r,u):l[r]=e[r]}return l.default=e,n&&n.set(e,l),l}var n,l,i,r,u,d,s,v,a,c,p,f,g,_,y,O,m,h,b,j=function(){return(j=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var l in t=arguments[o])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},w=e.get_stored_state(),x={volume:null!==(n=null==w?void 0:w.volume)&&void 0!==n?n:1,message:null!==(l=null==w?void 0:w.message)&&void 0!==l?l:-1,settings:null!==(i=null==w?void 0:w.settings)&&void 0!==i?i:{open:null!==(u=null===(r=null==w?void 0:w.settings)||void 0===r?void 0:r.open)&&void 0!==u&&u,insert_at_cursor:null!==(s=null===(d=null==w?void 0:w.settings)||void 0===d?void 0:d.insert_at_cursor)&&void 0!==s&&s,trim_whitespace:null!==(a=null===(v=null==w?void 0:w.settings)||void 0===v?void 0:v.trim_whitespace)&&void 0!==a&&a,voice:null!==(p=null===(c=null==w?void 0:w.settings)||void 0===c?void 0:c.voice)&&void 0!==p?p:e.VOICE_NAMES[0]},editor:{text:null!==(g=null===(f=null==w?void 0:w.editor)||void 0===f?void 0:f.text)&&void 0!==g?g:"",max_length:null!==(y=null===(_=null==w?void 0:w.editor)||void 0===_?void 0:_.max_length)&&void 0!==y?y:255,speed:null!==(m=null===(O=null==w?void 0:w.editor)||void 0===O?void 0:O.speed)&&void 0!==m&&m}},I=null!==(h=e.get_stored_messages())&&void 0!==h?h:[],P=null!==(b=e.get_stored_scratch())&&void 0!==b?b:[],M=j(j({},x),{messages:I,scratch:P});exports.INITIAL_STATE=M;
},{"~/common":"rTqy"}],"MkpQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SCRATCH=exports.MESSAGES=exports.EDITOR_SETTINGS=exports.ADD_SNIPPET_CALLBACK=exports.EDIT_MSG_TARGET=exports.EDITOR_UNSAVED=exports.LOADED_MESSAGE=exports.EDITOR_STATE=exports.VOLUME_CTX=exports.ImmutableContextValue=exports.createNamedContext=void 0;var e,t=n(require("preact")),r=require("~/model/initial-state");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in e)if("default"!==T&&Object.prototype.hasOwnProperty.call(e,T)){var u=a?Object.getOwnPropertyDescriptor(e,T):null;u&&(u.get||u.set)?Object.defineProperty(n,T,u):n[T]=e[T]}return n.default=e,r&&r.set(e,n),n}var a=function(e,r){var o=t.createContext(new T(e,function(){}));return o.displayName=r,o};exports.createNamedContext=a;var T=function(){function e(e,t){this._value=e,this._setValue=t}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"setValue",{get:function(){return this._setValue},set:function(e){},enumerable:!1,configurable:!0}),e}();exports.ImmutableContextValue=T;var u=a(r.INITIAL_STATE.volume,"VOLUME_CTX");exports.VOLUME_CTX=u;var s=a(r.INITIAL_STATE.editor,"EDITOR_STATE");exports.EDITOR_STATE=s;var E=a(null!==(e=r.INITIAL_STATE.message)&&void 0!==e?e:-1,"LOADED_MESSAGE");exports.LOADED_MESSAGE=E;var p=a(!0,"EDITOR_UNSAVED");exports.EDITOR_UNSAVED=p;var i=a(void 0,"EDIT_MSG_TARGET");exports.EDIT_MSG_TARGET=i;var A=a(function(){},"ADD_SNIPPET_CALLBACK");exports.ADD_SNIPPET_CALLBACK=A;var S=a(r.INITIAL_STATE.settings,"EDITOR_SETTINGS");exports.EDITOR_SETTINGS=S;var _=a(r.INITIAL_STATE.messages,"MESSAGES");exports.MESSAGES=_;var I=a(r.INITIAL_STATE.scratch,"SCRATCH");exports.SCRATCH=I;
},{"preact":"aSor","~/model/initial-state":"uIaN"}],"p5UI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./context");Object.keys(e).forEach(function(t){"default"!==t&&"__esModule"!==t&&(t in exports&&exports[t]===e[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}}))});var t=require("./initial-state");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});
},{"./context":"MkpQ","./initial-state":"uIaN"}],"leC2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.trim_whitespace=exports.insert_text_at_selection=exports.ensure_number=void 0;var e=function(e,t){var r=e;return"string"==typeof e&&(r=parseInt(e)),isNaN(r)?null!=t?t:0:r};exports.ensure_number=e;var t=function(e,t,r,n){var i,s,l,o,u=null!==(i=n.current)&&void 0!==i?i:{},c=u.selectionStart,a=void 0===c?e.length:c,v=u.selectionEnd,d=void 0===v?e.length:v,p=r-(e.length-(d-a));if(p<1)return null===(s=n.current)||void 0===s||s.focus(),[e,e.length];p<t.length&&(t=t.slice(0,p));var h=null!==(l=null==e?void 0:e.slice(0,a))&&void 0!==l?l:"",_=null!==(o=null==e?void 0:e.slice(d))&&void 0!==o?o:"";return!t.startsWith(" ")||e&&!h.endsWith(" ")||(t=t.slice(1)),t.endsWith(" ")&&_.startsWith(" ")&&(_=_.slice(1)),[(""+h+t+_).slice(0,r),(""+h+t).length]};exports.insert_text_at_selection=t;var r=function(e){return e.trim().replace(/[ ]+/g," ").replace(/(\s)\s+/g,"$1")};exports.trim_whitespace=r;
},{}],"TTiJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maybeClassName=void 0;var e=function(e){return e?" "+e:""};exports.maybeClassName=e;
},{}],"Zebh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useContextState=exports.useRequestStatus=exports.useValueRef=exports.useStateRef=exports.useStateIfMounted=void 0;var e=r(require("preact/hooks"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function r(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var u={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(u,s,a):u[s]=e[s]}return u.default=e,n&&n.set(e,u),u}var n=function(){var t=e.useRef(!0);return e.useEffect(function(){return function(){t.current=!1}},[]),t},u=function(t){var r=n(),u=e.useState(t),o=u[0],s=u[1];return[o,e.useCallback(function(e){r.current&&s(e)},[s,r])]};exports.useStateIfMounted=u;var o=function(t){var r=n(),u=e.useRef(t),o=e.useState(t),s=o[0],a=o[1];return[s,e.useCallback(function(e){r.current&&(u.current="function"==typeof e?e(u.current):e,a(e))},[a,r]),u]};exports.useStateRef=o;var s=function(t){var r=e.useRef(t);return r.current=t,r};exports.useValueRef=s;var a=function(t){var r=u({pending:!1,success:!1,error:null}),n=r[0],o=r[1];return[n,e.useCallback(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return o({pending:!0,success:!1,error:null}),t.apply(void 0,e).then(function(e){return o({pending:!1,success:!0,error:null}),e}).catch(function(e){return o({pending:!1,success:!1,error:e}),e})},[t])]};exports.useRequestStatus=a;var c=function(t){var r=e.useContext(t);return[r.value,r.setValue]};exports.useContextState=c;
},{"preact/hooks":"MwGB"}],"KGSM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useDebounce=exports.useCopyToClipboard=exports.useTempAnimation=exports.useModal=exports.useHoldClick=void 0;var e=require("preact/compat"),t=u(require("preact/hooks")),r=require("~/view/utils");function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var u={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var l=o?Object.getOwnPropertyDescriptor(e,c):null;l&&(l.get||l.set)?Object.defineProperty(u,c,l):u[c]=e[c]}return u.default=e,r&&r.set(e,u),u}var o=function(e,t,r,n){return new(r||(r=Promise))(function(u,o){function c(e){try{i(n.next(e))}catch(t){o(t)}}function l(e){try{i(n.throw(e))}catch(t){o(t)}}function i(e){var t;e.done?u(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(c,l)}i((n=n.apply(e,t||[])).next())})},c=function(e,t){var r,n,u,o,c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,n&&(u=2&o[0]?n.return:o[0]?n.throw||((u=n.return)&&u.call(n),0):n.next)&&!(u=u.call(n,o[1])).done)return u;switch(n=0,u&&(o=[2&o[0],u.value]),o[0]){case 0:case 1:u=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,n=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!(u=(u=c.trys).length>0&&u[u.length-1])&&(6===o[0]||2===o[0])){c=0;continue}if(3===o[0]&&(!u||o[1]>u[0]&&o[1]<u[3])){c.label=o[1];break}if(6===o[0]&&c.label<u[1]){c.label=u[1],u=o;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(o);break}u[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(l){o=[6,l],n=0}finally{r=u=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},l={once:!0},i=function(e,n,u,o){void 0===u&&(u=150),void 0===o&&(o=750);var c=(0,r.useStateRef)(!1),i=c[0],a=c[1],s=c[2],f=(0,r.useValueRef)(e),p=(0,r.useValueRef)(n),v=(0,r.useValueRef)(u),d=t.useRef(),m=t.useCallback(function(){var e;console.log("repeat click fired",s.current),s.current&&(d.current&&clearTimeout(d.current),null===(e=f.current)||void 0===e||e.call(f),d.current=setTimeout(m,v.current))},[]),b=t.useCallback(function(){console.log("ending hold click"),a(!1),clearTimeout(d.current),d.current=null},[]);t.useEffect(function(){if(i)return d.current=setTimeout(m,o),window.addEventListener("mouseup",b,l),window.addEventListener("blur",b,l),function(){var e;null===(e=p.current)||void 0===e||e.call(p),window.removeEventListener("mouseup",b),window.removeEventListener("blur",b)}},[i]);var y=t.useCallback(function(e){var t;e.initialClick=!0,null===(t=f.current)||void 0===t||t.call(f,e),a(!0),console.log("initial hold click")},[]);return t.useMemo(function(){var e={onMouseDown:y};return i&&(e.onMouseLeave=b),e},[i])};exports.useHoldClick=i;var a=function(t){var r=document.getElementById("modal-container");return r&&t?(0,e.createPortal)(t,r):null};exports.useModal=a;var s=function(e,n){var u=t.useRef(),o=(0,r.useStateRef)(!1),c=o[0],l=o[1],i=o[2],a=t.useCallback(function(){l(!1),u.current&&clearTimeout(u.current),u.current=null},[]),s=t.useCallback(function(){i.current&&a(),u.current&&clearTimeout(u.current),n?u.current=setTimeout(function(){l(!0),u.current=setTimeout(a,e)},n):(l(!0),u.current=setTimeout(a,e))},[e,n]);return t.useEffect(function(){if(c)return function(){u.current&&clearTimeout(u.current),u.current=null}},[c]),[c,s,l]};exports.useTempAnimation=s;var f=function(e){return t.useCallback(function(){return o(void 0,void 0,void 0,function(){var t,r,n;return c(this,function(u){return t=document.getElementById("clipboard-input"),e&&t instanceof HTMLTextAreaElement?(r=document.activeElement,t.value=e,t.focus(),t.select(),t.setSelectionRange(0,99999),n=document.execCommand("copy"),t.value="",t.blur(),null==r||r.focus(),[2,n?Promise.resolve():Promise.reject()]):[2,Promise.reject()]})})},[e])};exports.useCopyToClipboard=f;var p=function(e,r){void 0===r&&(r=150);var n=t.useRef(null),u=t.useCallback(function(){for(var t=[],u=0;u<arguments.length;u++)t[u]=arguments[u];n.current&&clearTimeout(n.current),n.current=setTimeout(function(){e.apply(void 0,t),clearTimeout(n.current),n.current=null},r)},[e]),o=t.useCallback(function(){n.current&&(clearTimeout(n.current),n.current=null)},[]);return t.useEffect(function(){return function(){clearTimeout(n.current),n.current=null}},[e]),[u,o]};exports.useDebounce=p;
},{"preact/compat":"AQ6k","preact/hooks":"MwGB","~/view/utils":"YORt"}],"urVX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useTextOptimization=exports.useInsertSnippet=exports.useMessageFullText=exports.useAudioPlayer=exports.usePlaySnippet=exports.usePlayMessage=void 0;var e=s(require("preact/hooks")),t=require("~/common"),r=require("~/model"),u=require("~/view/utils");function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var u={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var o=s?Object.getOwnPropertyDescriptor(e,c):null;o&&(o.get||o.set)?Object.defineProperty(u,c,o):u[c]=e[c]}return u.default=e,r&&r.set(e,u),u}var c=function(n,s,c){var o,a=null===(o=e.useContext(r.EDITOR_SETTINGS).value)||void 0===o?void 0:o.voice,i=(0,u.useValueRef)(a),l=n.text,f=n.options,p=f.speed,v=f.max_length,d=(0,u.useStateRef)(""),_=d[0],x=d[1],S=d[2],y=e.useMemo(function(){return p&&v!==l.length?l+" "+"¡".repeat(v-l.length-1):l},[p,l,v]),R=(0,u.useRequestStatus)(t.get_tts_data),g=R[0],h=R[1],T=e.useCallback(function(){h(y,c,i.current).then(function(e){e===S.current?S.current&&(0,t.play_audio)(s):x(e)})},[y]);return e.useEffect(function(){_&&(0,t.play_audio)(s)},[_]),[_,g,T,y]};exports.usePlayMessage=c;var o=function(n,s){var c,o=null===(c=e.useContext(r.EDITOR_SETTINGS).value)||void 0===c?void 0:c.voice,a=(0,u.useValueRef)(o),i=(0,u.useStateRef)(""),l=i[0],f=i[1],p=i[2],v=(0,u.useRequestStatus)(t.get_tts_data),d=v[0],_=v[1],x=e.useCallback(function(e,r){var u=e.text,c=e.options,o=c.prefix,i=void 0===o?"":o,l=c.default_count,v=c.suffix,d=void 0===v?"":v,x=""+i+u.repeat(r||l||1)+d;return _(x,s,a.current).then(function(e){e===p.current?p.current&&(0,t.play_audio)(n):f(e)})},[]);return e.useEffect(function(){l&&(0,t.play_audio)(n)},[l]),[l,d,x]};exports.usePlaySnippet=o;var a=function(n,s){var c,o=null===(c=e.useContext(r.EDITOR_SETTINGS).value)||void 0===c?void 0:c.voice,a=(0,u.useValueRef)(o),i=(0,u.useStateRef)(""),l=i[0],f=i[1],p=i[2];e.useEffect(function(){l&&(0,t.play_audio)(n)},[l]);var v=e.useCallback(function(e){return e?(0,t.get_tts_data)(e,s,a.current).then(function(e){e===p.current?(0,t.play_audio)(n):f(e)}):Promise.resolve()},[]);return[l,v]};exports.useAudioPlayer=a;var i=function(t){var r=t.text,u=t.options,n=u.max_length,s=u.speed;return e.useMemo(function(){return s?r+" "+"¡".repeat(n-r.length-1):r},[r,n,s])};exports.useMessageFullText=i;var l=function(t,n,s){var c=e.useContext(r.EDITOR_SETTINGS).value,o=(0,u.useValueRef)(c.insert_at_cursor),a=(0,u.useValueRef)(t),i=(0,u.useValueRef)(n),l=e.useRef(-1),f=e.useRef(!1),p=e.useCallback(function(e,t){var r,n;if(t||-1===l.current||(s.current.selectionStart=l.current,s.current.selectionEnd=l.current),o.current){var c=(0,u.insert_text_at_selection)(a.current,e,i.current,s),p=c[0],v=c[1];n=p,l.current=v}else!e.startsWith(" ")||a.current&&!a.current.endsWith(" ")||(e=e.slice(1)),n=(""+a.current+e).slice(0,i.current),l.current=n.length;return"end"===t&&(n===a.current?l.current=-1:f.current=!0),n===a.current&&(null===(r=s.current)||void 0===r||r.focus()),n},[]);return e.useEffect(function(){var e;-1!==l.current&&(null===(e=s.current)||void 0===e||e.focus(),s.current.selectionStart=l.current,s.current.selectionEnd=l.current,l.current=-1),f.current&&(l.current=-1,f.current=!1)},[t]),p};exports.useInsertSnippet=l;var f=function(t,n,s){var c=e.useContext(r.EDITOR_SETTINGS).value,o=(0,u.useValueRef)(c),a=e.useRef(),i=e.useRef(-1);return e.useEffect(function(){var e,r;if(t===a.current)return-1!==i.current&&(s.current&&(s.current.selectionStart=i.current,s.current.selectionEnd=i.current),i.current=-1),void(a.current="");if(null===(e=o.current)||void 0===e?void 0:e.trim_whitespace){for(var u=(null!==(r=s.current)&&void 0!==r?r:{}).selectionStart,c=void 0===u?-9:u,l="",f=0;f<t.length;f++)f===c&&(i.current=l.length),/\s/.test(t[f])&&(/\s/.test(l.slice(-1))||0===f||f===t.length-1&&f!==c-1)&&f!==c||(l+=t[f]);a.current=l,l!==t&&n(l)}},[t]),e.useCallback(function(e){var t;return(null===(t=o.current)||void 0===t?void 0:t.trim_whitespace)&&(e=(0,u.trim_whitespace)(e)),n(e),e},[n])};exports.useTextOptimization=f;
},{"preact/hooks":"MwGB","~/common":"rTqy","~/model":"p5UI","~/view/utils":"YORt"}],"oVMM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./data");Object.keys(e).forEach(function(t){"default"!==t&&"__esModule"!==t&&(t in exports&&exports[t]===e[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}}))});var t=require("./dom");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var r=require("./tts");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});
},{"./data":"Zebh","./dom":"KGSM","./tts":"urVX"}],"YORt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./common");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./dom-helpers");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./hooks");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});
},{"./common":"leC2","./dom-helpers":"TTiJ","./hooks":"oVMM"}],"BcoN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WithContextHooks=exports.WithGlobalContexts=void 0;var t=a(require("preact")),e=require("preact/compat"),n=a(require("preact/hooks")),o=a(require("~/common")),r=require("~/model"),u=require("~/view/utils");function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(i=function(t){return t?n:e})(t)}function a(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=i(e);if(n&&n.has(t))return n.get(t);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var a=r?Object.getOwnPropertyDescriptor(t,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=t[u]}return o.default=t,n&&n.set(t,o),o}var s=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c={VOLUME_CTX:{context:r.VOLUME_CTX,initialValue:r.INITIAL_STATE.volume},EDITOR_STATE:{context:r.EDITOR_STATE,initialValue:r.INITIAL_STATE.editor},EDITOR_SETTINGS:{context:r.EDITOR_SETTINGS,initialValue:r.INITIAL_STATE.settings},EDITOR_UNSAVED:{context:r.EDITOR_UNSAVED,initialValue:!0},EDIT_MSG_TARGET:{context:r.EDIT_MSG_TARGET,initialValue:void 0},ADD_SNIPPET_CALLBACK:{context:r.ADD_SNIPPET_CALLBACK,initialValue:function(){}},MESSAGES:{context:r.MESSAGES,initialValue:r.INITIAL_STATE.messages},SCRATCH:{context:r.SCRATCH,initialValue:r.INITIAL_STATE.scratch}},l=function(e){function n(t){var n=e.call(this,t)||this;return n.mounted=!1,n.createSetter=function(t){return function(e){var o=n._state[t],u="function"==typeof e?e(o):e;o!==u&&(n._state[t]=u,n._ctx_values[t]=new r.ImmutableContextValue(u,n._setters[t]),n.mounted&&n.forceUpdate())}},n._state={},n._setters={},n._ctx_values={},Object.entries(c).forEach(function(t){var e=t[0],o=t[1],u=(o.context,o.initialValue);n._state[e]=u,n._setters[e]=n.createSetter(e),n._ctx_values[e]=new r.ImmutableContextValue(n._state[e],n._setters[e])}),n}return s(n,e),n.prototype.componentDidMount=function(){this.mounted=!0},n.prototype.componentWillUnmount=function(){this.mounted=!1},n.prototype.render=function(){var e=this,n=this.props.children;return t.h(t.Fragment,null,Object.entries(c).reduce(function(n,o){var r=o[0],u=o[1],i=u.context.Provider;return t.h(i,{context:u.context,value:e._ctx_values[r]},n)},n))},n}(e.PureComponent);exports.WithGlobalContexts=l;var _=function(e){var i,a=e.children,s=n.useContext(r.MESSAGES).value,c=n.useContext(r.SCRATCH).value,l=n.useContext(r.VOLUME_CTX).value,_=n.useContext(r.EDITOR_STATE).value,f=n.useContext(r.EDITOR_SETTINGS).value,T=n.useContext(r.EDITOR_UNSAVED).value,p=(0,u.useStateIfMounted)(null!==(i=null===r.INITIAL_STATE||void 0===r.INITIAL_STATE?void 0:r.INITIAL_STATE.message)&&void 0!==i?i:-1),E=p[0],I=p[1],S=(0,u.useValueRef)(T),v=n.useCallback(function(t,e){if(null==t)return!1;var n=!0;return S.current&&!0!==e&&(n=confirm("Are you sure you want to discard your changes?")),!!n&&(I(t),!0)},[]),A=n.useMemo(function(){return new r.ImmutableContextValue(E,v)},[v,E]);return(0,n.useEffect)(function(){o.set_stored_state({volume:l,message:E,editor:_,settings:f})},[l,_,E,f]),(0,n.useEffect)(function(){o.set_stored_messages(s)},[s]),(0,n.useEffect)(function(){o.set_stored_scratch(c)},[c]),t.h(r.LOADED_MESSAGE.Provider,{value:A},a)};exports.WithContextHooks=_;
},{"preact":"aSor","preact/compat":"AQ6k","preact/hooks":"MwGB","~/common":"rTqy","~/model":"p5UI","~/view/utils":"YORt"}],"v69W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AudioPlayer=void 0;var e=require("preact/devtools"),t=a(require("preact")),r=require("preact/hooks"),o=require("~/model"),u=require("~/view/utils");function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=u?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(o,a,i):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}var i=function(n){var a=n.id,i=n.data,l=n.className,s=(0,u.useContextState)(o.VOLUME_CTX),c=s[0],d=s[1],f=(0,e.addHookName)((0,r.useRef)(),"audio_ref"),v=(0,r.useCallback)(function(e){e.target.volume!==c&&(null==d||d(e.target.volume))},[d]),p=(0,u.useDebounce)(v)[0];return(0,r.useEffect)(function(){window.addEventListener("set-volume",function(e){f.current&&null!=e.detail&&(console.log("setting volume in event",e.detail,e.target),setTimeout(function(){f.current.volume=e.detail},150))})},[]),(0,r.useEffect)(function(){var e;if(f.current&&null!=c&&c!==(null===(e=f.current)||void 0===e?void 0:e.volume)){console.log("setting volume",c,f);var t=new CustomEvent("set-volume",{detail:c,bubbles:!0});window.dispatchEvent(t)}},[c]),t.h("div",{className:"tts-player"+(0,u.maybeClassName)(l)},t.h("audio",{ref:f,id:a?a+"-audio":"audio",controls:!0,onVolumeChange:p},i&&t.h("source",{id:a?a+"-source":"source",type:"audio/wav",src:i})))};exports.AudioPlayer=i;
},{"preact/devtools":"nR5O","preact":"aSor","preact/hooks":"MwGB","~/model":"p5UI","~/view/utils":"YORt"}],"ue35":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClipboardButton=void 0;var e=n(require("preact")),t=require("~/view/utils");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(o,u,i):o[u]=e[u]}return o.default=e,n&&n.set(e,o),o}var o=function(r){var n=r.text,o=r.disabled,a=r.className,u=(0,t.useTempAnimation)(2e3),i=u[0],c=u[1],s=u[2],p=(0,t.useCopyToClipboard)(n);return e.h("button",{className:"btn tts-clipboard-button"+(a?" "+a:""),"data-success":""+i,disabled:o,onMouseDown:function(){return s(!1)},onClick:function(){return p().then(c).catch(function(){})}},e.h("div",{className:"tts-clipboard-button-inner"},e.h("i",{className:"fas fa-copy"}),"Copy to Clipboard"))};exports.ClipboardButton=o;
},{"preact":"aSor","~/view/utils":"YORt"}],"oVou":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StatusIndicator=void 0;var e=r(require("preact"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,a=new WeakMap;return(t=function(e){return e?a:r})(e)}function r(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=t(r);if(a&&a.has(e))return a.get(e);var n={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=c?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,a&&a.set(e,n),n}var a=function(t){var r=t.status;return e.h("div",{className:"tts-submit-status"},r.pending?e.h("i",{className:"fas fa-circle-notch"}):r.success?e.h("i",{className:"fas fa-check-circle"}):r.error?e.h("i",{className:"fas fa-exclamation-circle"}):null)};exports.StatusIndicator=a;
},{"preact":"aSor"}],"Qr85":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./AudioPlayer");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./ClipboardButton");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./StatusIndicator");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});
},{"./AudioPlayer":"v69W","./ClipboardButton":"ue35","./StatusIndicator":"oVou"}],"eOgV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Editor=void 0;var e=require("preact/devtools"),t=s(require("preact")),r=require("preact/hooks"),n=require("~/model"),o=require("~/view/components"),u=require("~/view/utils");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}var i=function(a){var s,i,d,l=a.message,f=a.updateMessages,c=(0,u.useContextState)(n.EDITOR_STATE),p=c[0],v=c[1],m=(0,u.useContextState)(n.EDITOR_UNSAVED),h=m[0],g=m[1],x=(0,r.useContext)(n.LOADED_MESSAGE).setValue,M=(0,r.useContext)(n.ADD_SNIPPET_CALLBACK).setValue,S=(0,e.addHookName)((0,r.useRef)(),"input_ref"),_=(0,u.useStateIfMounted)(null!==(s=null==p?void 0:p.text)&&void 0!==s?s:""),E=_[0],b=_[1],y=(0,u.useStateIfMounted)(null!==(i=null==p?void 0:p.speed)&&void 0!==i&&i),O=y[0],D=y[1],P=(0,u.useStateIfMounted)(null!==(d=null==p?void 0:p.max_length)&&void 0!==d?d:255),w=P[0],C=P[1],A=(0,r.useMemo)(function(){return(0,u.ensure_number)(w,255)},[w]);(0,r.useEffect)(function(){v({max_length:A,speed:O,text:E})},[A,O,E]);var I=(0,r.useMemo)(function(){return{text:E,name:null==l?void 0:l.name,options:{max_length:A,speed:O}}},[A,O,E,null==l?void 0:l.name]),N=(0,u.usePlayMessage)(I),j=N[0],k=N[1],q=N[2],L=N[3],R=(0,e.addHookName)((0,r.useRef)(!0),"first_render");(0,r.useEffect)(function(){var e,t;R.current?R.current=!1:l&&(b(l.text),D(null===(e=l.options)||void 0===e?void 0:e.speed),C(null===(t=l.options)||void 0===t?void 0:t.max_length))},[l]);var T=(0,r.useCallback)(function(){h&&!confirm("Discard unsaved changes to the current message?")||(b(""),D(!1),g(!1),x(-1))},[h]),H=(0,u.useInsertSnippet)(E,A,S);return(0,r.useEffect)(function(){M(function(){return function(e,t){var r=H(e,t);b(r)}})},[]),t.h(t.Fragment,null,t.h(o.EditorHeader,{maxLength:A,setMaxLength:C,reset:T}),t.h(o.EditorMain,{inputRef:S,text:E,onChange:b,onSubmit:q,speed:O,setSpeed:D,status:k}),t.h("div",{className:"row"},t.h(o.AudioPlayer,{data:j}),t.h(o.StatusIndicator,{status:k})),k.error&&t.h("div",{className:"error"},JSON.stringify(k.error,null,2)),t.h("div",{className:"row tts-main-bottom"},t.h(o.SaveMessage,{disabled:!h,message:I,updateMessages:f}),t.h(o.ClipboardButton,{text:L,disabled:!E})))};exports.Editor=i;
},{"preact/devtools":"nR5O","preact":"aSor","preact/hooks":"MwGB","~/model":"p5UI","~/view/components":"AOf9","~/view/utils":"YORt"}],"K8tP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EditorHeader=void 0;var t=r(require("preact")),e=require("preact/hooks"),s=require("~/common"),a=require("~/model"),n=require("~/view/utils");function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,s=new WeakMap;return(i=function(t){return t?s:e})(t)}function r(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=i(e);if(s&&s.has(t))return s.get(t);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if("default"!==r&&Object.prototype.hasOwnProperty.call(t,r)){var o=n?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=t[r]}return a.default=t,s&&s.set(t,a),a}var o=function(){return(o=Object.assign||function(t){for(var e,s=1,a=arguments.length;s<a;s++)for(var n in e=arguments[s])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},c=function(i){var r=i.maxLength,c=i.setMaxLength,l=i.reset,u=(0,n.useContextState)(a.EDITOR_SETTINGS),h=u[0],p=u[1],m=(0,n.useValueRef)(h),d=(0,e.useCallback)(function(t,e){var s;return p(o(o({},m.current),((s={})[t]=e,s)))},[]),g=(0,n.useStateIfMounted)(r),v=g[0],f=g[1],b=(0,n.useDebounce)(c,75)[0];return t.h("div",{className:"tts-header"},t.h("div",{className:"tts-header-top"},t.h("h4",null,"TTS Message"),t.h("div",{className:"tts-header-controls"},t.h("button",{className:"btn btn-with-icon icon-only btn-negative tts-settings-reset",title:"Clear the editor and start a new message",onClick:l},t.h("i",{className:"fas fa-undo"})),t.h("button",{className:"tts-settings-button",type:"button",onClick:function(){return d("open",!h.open)},"data-open":""+h.open},t.h("i",{className:"fas fa-cog"})))),t.h("div",{className:"tts-settings","data-open":""+h.open},t.h("div",{className:"row tts-settings-section tts-settings-section-tall"},t.h("div",{className:"tts-settings-item tts-settings-char-limit"},t.h("label",{for:"tts-settings-char-limit",className:"tts-settings-item-label"},"Character Limit: ",v),t.h("input",{id:"tts-settings-char-limit",className:"tts-settings-item-control",type:"range",min:255,max:500,onInput:function(t){var e=(0,n.ensure_number)(t.target.valueAsNumber,255);f(e),b(e)},value:v})),t.h("div",{className:"tts-settings-item tts-settings-insert",title:"Insert a snippet from the scratch pad at either the cursor position or at the end of the message"},t.h("div",{className:"tts-settings-item-label"},"Insert Snippets At:"),t.h("div",{className:"tts-settings-item-control"},t.h("label",{className:"radio-button tts-settings-insert-input"},t.h("input",{type:"radio",value:"true",onInput:function(){return d("insert_at_cursor",!0)},checked:!0===h.insert_at_cursor}),t.h("span",{className:"radio-label"},"Cursor")),t.h("label",{className:"radio-button tts-settings-insert-input"},t.h("input",{type:"radio",value:"true",onInput:function(){return d("insert_at_cursor",!1)},checked:!1===h.insert_at_cursor}),t.h("span",{className:"radio-label"},"End")))),t.h("div",{className:"tts-settings-item tts-settings-voice",title:"Select a TTS voice"},t.h("div",{className:"tts-settings-item-label"},"TTS Voice"),t.h("div",{className:"tts-settings-item-control"},t.h("select",{value:h.voice,onChange:function(t){return d("voice",t.target.value)}},s.VOICE_NAMES.map(function(e){return t.h("option",{value:e,key:e},e)}))))),t.h("div",{className:"tts-settings-section-label"},"Message Optimization"),t.h("div",{className:"row tts-settings-section"},t.h("div",{className:"tts-settings-item"},t.h("label",{className:"checkbox tts-settings-whitespace",title:"Automatically remove any duplicate, leading, or trailing whitespace"},t.h("input",{type:"checkbox",checked:h.trim_whitespace,onInput:function(){return d("trim_whitespace",!h.trim_whitespace)}}),t.h("span",{className:"checkbox-label"},"Automatically Trim Spaces"))))))};exports.EditorHeader=c;
},{"preact":"aSor","preact/hooks":"MwGB","~/common":"rTqy","~/model":"p5UI","~/view/utils":"YORt"}],"a7WJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TTSTextArea=exports.EditorMain=void 0;var e=require("preact/devtools"),t=o(require("preact")),n=require("preact/hooks"),r=require("~/model"),a=require("~/view/components"),u=require("~/view/utils");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=a?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(r,u,o):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}var l=function(e){var u=e.text,i=e.onChange,o=e.onSubmit,l=e.speed,c=e.setSpeed,d=e.status,p=e.inputRef,v=(0,n.useContext)(r.EDITOR_STATE).value.max_length;return t.h("p",{className:"tts-textarea-container"},t.h(s,{inputRef:p,id:"tts-main-input",value:u,onChange:i,maxLength:v,speed:l}),t.h("div",{className:"tts-textarea-bottom"},t.h("div",null,"Length:"," ",t.h("span",null,u.length," / ",v)),t.h("div",null,t.h("label",null,"Fill remainder with Speed Modifier (¡)",t.h("input",{type:"checkbox",checked:l,onInput:function(e){return c(e.target.checked)}}))),t.h(a.PauseAddControl,{speedModified:l,text:u,onAdd:i})),t.h("div",{className:"row"},t.h("div",{className:"tts-textarea-submit"},t.h("button",{className:"btn btn-primary",disabled:d.pending||!u,type:"submit",onClick:function(e){e.preventDefault(),o(u)}},"Submit"))))};exports.EditorMain=l;var s=function(r){var a=r.value,i=r.onChange,o=r.speed,l=r.id,s=r.maxLength,c=r.inputRef,d=(0,e.addHookName)((0,n.useRef)(),"preview_ref"),p=(0,u.useTextOptimization)(a,i,c),v=(0,u.useDebounce)(p,300),f=v[0],h=v[1],m="",x=parseInt(""+s);return o&&x!==a.length&&(m="¡".repeat(Math.max(0,x-a.length-1))),t.h("div",{className:"tts-textarea"},t.h("textarea",{id:l,ref:c,className:"tts-textarea-input",value:a,rows:12,cols:82,maxLength:s,onInput:function(e){return i(e.target.value)},onBlur:function(){return f(a)},onFocus:h,onSelect:function(){var e,t;null===(e=d.current)||void 0===e||e.setAttribute("data-cursor",""+(null===(t=null==c?void 0:c.current)||void 0===t?void 0:t.selectionStart))},onKeyDown:function(){var e,t;null===(e=d.current)||void 0===e||e.setAttribute("data-cursor",""+(null===(t=null==c?void 0:c.current)||void 0===t?void 0:t.selectionStart))},onKeyUp:function(){var e,t;null===(e=d.current)||void 0===e||e.setAttribute("data-cursor",""+(null===(t=null==c?void 0:c.current)||void 0===t?void 0:t.selectionStart))},onClick:function(){var e,t;null===(e=d.current)||void 0===e||e.setAttribute("data-cursor",""+(null===(t=null==c?void 0:c.current)||void 0===t?void 0:t.selectionStart))}}),t.h("div",{className:"tts-textarea-preview",ref:d},t.h("span",null,a)," ",t.h("span",null,m)))};exports.TTSTextArea=s;
},{"preact/devtools":"nR5O","preact":"aSor","preact/hooks":"MwGB","~/model":"p5UI","~/view/components":"AOf9","~/view/utils":"YORt"}],"V9Nn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PauseAddControl=exports.generate_pause=exports.generate_modified_pause=exports.generate_unmodified_pause=exports.MOD_PAUSE_CHAR_DURATION=exports.SLASH_DURATION=exports.PAUSE_CHAR_SPEED_MODIFIED=void 0;var e=require("preact/devtools"),t=o(require("preact")),r=require("preact/hooks"),a=require("~/view/utils");function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(a,u,s):a[u]=e[u]}return a.default=e,r&&r.set(e,a),a}var u="ᴾ";exports.PAUSE_CHAR_SPEED_MODIFIED=u;var s=2.5/14;exports.SLASH_DURATION=s;var i=1.067/14;exports.MOD_PAUSE_CHAR_DURATION=i;var d=function(e){return"/ ".repeat(Math.max(1,Math.round(e/s)))};exports.generate_unmodified_pause=d;var c=function(e){return u.repeat(Math.max(1,Math.round(e/i)))};exports.generate_modified_pause=c;var l=function(e,t){return void 0===t&&(t=!1),t?c(e):d(e)};exports.generate_pause=l;var p=function(n){var o=n.text,u=n.onAdd,s=n.speedModified,i=(0,a.useStateIfMounted)(!1),d=i[0],c=i[1],p=(0,a.useStateIfMounted)(1),f=p[0],v=p[1],m=(0,a.useStateIfMounted)(s),h=m[0],_=m[1],b=(0,e.addHookName)((0,r.useRef)(),"input_ref"),x=function(){return c(!1)},A=(0,r.useCallback)(function(){var e=l(f,h);return(h||o.endsWith(" ")?"":" ")+e},[f,h,o]);(0,r.useEffect)(function(){var e;if(d){var t=document.activeElement;return null===(e=b.current)||void 0===e||e.focus(),function(){var e;null===(e=b.current)||void 0===e||e.blur(),null==t||t.focus()}}},[d]);var M=t.h("div",{className:"modal-backdrop"},t.h("div",{className:"modal tts-pause-modal"},t.h("div",{className:"modal-header"},t.h("h3",null,"Add a Pause")),t.h("div",{className:"modal-body"},t.h("div",{className:"row"},t.h("label",{className:"tts-pause-modal-duration"},t.h("span",null,"Pause Duration"),t.h("span",null,t.h("input",{type:"number",value:f,min:.1,max:10,step:.1,onInput:function(e){return v((0,a.ensure_number)(e.target.valueAsNumber,1))}}),"seconds")),t.h("label",{className:"tts-pause-modal-checkbox"},t.h("input",{type:"checkbox",checked:h,onInput:function(e){return _(e.target.checked)}}),"Preserve Speed Modifiers"))),t.h("div",{className:"modal-footer"},t.h("button",{className:"btn",onClick:x},"Cancel"),t.h("button",{className:"btn btn-primary",onClick:function(){u(A()),x()}},"Add"))));return t.h("div",{className:"tts-pause-control"},t.h("button",{className:"btn",onClick:function(){return c(!0)}},"Add Pause"),d&&(0,a.useModal)(M))};exports.PauseAddControl=p;
},{"preact/devtools":"nR5O","preact":"aSor","preact/hooks":"MwGB","~/view/utils":"YORt"}],"cO6E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SaveMessageModal=exports.SaveMessage=void 0;var e=o(require("preact")),t=require("preact/hooks"),a=require("~/model"),s=require("~/view/components"),r=require("~/view/utils");function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(n=function(e){return e?a:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=n(t);if(a&&a.has(e))return a.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=r?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(s,o,u):s[o]=e[o]}return s.default=e,a&&a.set(e,s),s}var u=function(){return(u=Object.assign||function(e){for(var t,a=1,s=arguments.length;a<s;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},i=function(t){var a=t.message,s=t.updateMessages,n=t.disabled,o=(0,r.useStateIfMounted)(!1),u=o[0],i=o[1];return e.h("button",{className:"btn",disabled:!a.text||n,onClick:function(){return i(!0)}},e.h("i",{className:"fas fa-save"}),"Save Message",u&&(0,r.useModal)(e.h(l,{message:a,updateMessages:s,dismiss:function(){return i(!1)}})))};exports.SaveMessage=i;var l=function(n){var o=n.message,i=n.updateMessages,l=n.dismiss,c=(0,t.useContext)(a.MESSAGES).value,f=(0,t.useContext)(a.LOADED_MESSAGE).value,p=c[f],d=o.name,v=(0,r.useStateIfMounted)(d),b=v[0],m=v[1],M=null==b?void 0:b.trim();return e.h(s.MessageModalBase,{message:o,name:b,setName:m,dismiss:l,isNew:!p},e.h("button",{className:"btn",onClick:l},"Cancel"),!!p&&e.h("button",{className:"btn btn-primary",onClick:function(){i(-1,u(u({},o),{name:M}))&&l()},disabled:!M||M===d},"Save As New..."),e.h("button",{className:"btn btn-primary",onClick:function(){i(f,u(u({},o),{name:M}))&&l()},disabled:!M},"Save ",p?"Changes":"New"))};exports.SaveMessageModal=l;
},{"preact":"aSor","preact/hooks":"MwGB","~/model":"p5UI","~/view/components":"AOf9","~/view/utils":"YORt"}],"Yncg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Editor");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./Header");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./Main");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var o=require("./PauseAddControl");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}}))});var n=require("./SaveControl");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}}))});
},{"./Editor":"eOgV","./Header":"K8tP","./Main":"a7WJ","./PauseAddControl":"V9Nn","./SaveControl":"cO6E"}],"reWG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MessageModalBase=exports.MessageModal=void 0;var e=require("preact/devtools"),s=r(require("preact")),a=require("preact/hooks"),t=require("~/view/components"),n=require("~/view/utils");function o(e){if("function"!=typeof WeakMap)return null;var s=new WeakMap,a=new WeakMap;return(o=function(e){return e?a:s})(e)}function r(e,s){if(!s&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=o(s);if(a&&a.has(e))return a.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=n?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(t,r,l):t[r]=e[r]}return t.default=e,a&&a.set(e,t),t}var l=function(e){var o=e.message,r=e.loadMessage,l=e.updateMessage,u=e.deleteMessage,d=e.dismiss,c=e.previewMessage,m=e.isNew,p=o||{},f=p.name,h=void 0===f?"":f,v=p.options,g=(0,n.useMessageFullText)(o),b=(0,n.useStateIfMounted)(h),N=b[0],M=b[1],w=(0,a.useCallback)(function(){confirm("Are you sure you want to delete this message?")&&(u(),d())},[]);return o?s.h(i,{message:o,name:N,setName:M,dismiss:d,previewMessage:c},m?s.h("div",null):s.h("button",{className:"btn btn-negative btn-with-icon",onClick:w,disabled:!h},s.h("i",{className:"fas fa-trash"}),"Delete"),!m&&s.h("div",{className:"btn-multi"},s.h("button",{className:"btn btn-with-icon btn-left",onClick:function(){r(),d()}},s.h("i",{className:"fas fa-folder-open"}),"Load Into Editor"),s.h(t.ClipboardButton,{className:"btn btn-with-icon btn-right",text:g})),s.h("button",{className:"btn btn-primary",onClick:function(){l({name:N,text:g,options:v}),d()},disabled:!N||N===h},"Save")):null};exports.MessageModal=l;var i=function(t){var o=t.message,r=t.name,l=t.setName,i=t.dismiss,u=t.isNew,d=(t.previewMessage,t.children),c=(0,e.addHookName)((0,a.useRef)(),"input_ref"),m=(o||{}).options,p=m.max_length,f=m.speed,h=(0,n.useMessageFullText)(o);return(0,a.useEffect)(function(){var e;null===(e=c.current)||void 0===e||e.focus()},[]),s.h("div",{className:"modal-backdrop"},s.h("div",{className:"modal tts-message-modal"},s.h("div",{className:"modal-header"},s.h("h3",null,u?"Create New":"Edit"," Saved Message"),s.h("button",{className:"icon-button modal-close",onClick:i},s.h("i",{className:"fas fa-times"}))),s.h("div",{className:"modal-body"},s.h("div",{className:"row tts-message-modal-name"},s.h("label",{className:"tts-message-modal-input"},s.h("p",null,"Message Name"),s.h("input",{ref:c,value:r,onInput:function(e){return l(e.target.value)}}))),s.h("div",{className:"tts-message-modal-preview"},h),s.h("div",{className:"tts-message-modal-details"},s.h("h4",null,"Options"),s.h("div",{className:"row"},s.h("span",null,"Character Limit: ",s.h("strong",null,p)),s.h("span",null,"Use Speed Modifier: ",s.h("strong",null,f?"Yes":"No"))))),s.h("div",{className:"modal-footer"},d)))};exports.MessageModalBase=i;
},{"preact/devtools":"nR5O","preact":"aSor","preact/hooks":"MwGB","~/view/components":"AOf9","~/view/utils":"YORt"}],"pB03":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MessagesListItem=exports.MessagesList=void 0;var e=o(require("preact")),s=require("preact/hooks"),t=require("~/model"),a=require("~/view/components"),r=require("~/view/components/messages/Modal"),i=require("~/view/utils");function n(e){if("function"!=typeof WeakMap)return null;var s=new WeakMap,t=new WeakMap;return(n=function(e){return e?t:s})(e)}function o(e,s){if(!s&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n(s);if(t&&t.has(e))return t.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(a,i,o):a[i]=e[i]}return a.default=e,t&&t.set(e,a),a}var u=function(n){var o=n.updateMessages,u=(0,s.useContext)(t.MESSAGES).value,c=(0,i.useContextState)(t.LOADED_MESSAGE),d=c[0],p=c[1],m=(0,i.useStateIfMounted)(void 0),g=m[0],f=m[1],v=(0,i.useAudioPlayer)("messages-sidebar-player"),M=v[0],h=v[1];return e.h("div",{className:"tts-messages"},e.h("div",{className:"row tts-messages-header"},e.h("h4",null,"Messages")),e.h("div",{className:"tts-message-list"},u.map(function(s,t){return e.h(l,{active:t===d,message:s,openMessageInModal:function(){return f(t)}})})),e.h(a.AudioPlayer,{id:"messages-sidebar-player",className:"tts-messages-sidebar-player invisible",data:M}),null!=g&&(0,i.useModal)(e.h(r.MessageModal,{message:u[g],loadMessage:function(){return p(g)},updateMessage:function(e){return o(g,e)},deleteMessage:function(){return o(g)},dismiss:function(){return f(void 0)},previewMessage:h})))};exports.MessagesList=u;var l=function(s){var t=s.active,a=s.message,r=s.openMessageInModal,n=(0,i.useCopyToClipboard)((0,i.useMessageFullText)(a));return e.h("div",{className:"tts-message-item","data-active":""+t},e.h("div",{className:"tts-message-item-header"},e.h("div",{className:"tts-message-item-title",onClick:r},a.name),e.h("button",{className:"btn icon-button tts-message-item-copy",onClick:n,title:"Copy message to clipboard"},e.h("i",{className:"fas fa-clipboard"}))))};exports.MessagesListItem=l;
},{"preact":"aSor","preact/hooks":"MwGB","~/model":"p5UI","~/view/components":"AOf9","~/view/components/messages/Modal":"reWG","~/view/utils":"YORt"}],"hurr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./List");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./Modal");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});
},{"./List":"pB03","./Modal":"reWG"}],"xRVA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScratchRow=void 0;var t=require("preact/devtools"),e=s(require("preact")),r=require("preact/hooks"),o=require("~/model"),n=require("~/view/components"),i=require("~/view/utils");function a(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(a=function(t){return t?r:e})(t)}function s(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a(e);if(r&&r.has(t))return r.get(t);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var s=n?Object.getOwnPropertyDescriptor(t,i):null;s&&(s.get||s.set)?Object.defineProperty(o,i,s):o[i]=t[i]}return o.default=t,r&&r.set(t,o),o}var l=function(){return(l=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},u=function(a){var s,u,c,f=a.row,p=(a.updateRow,a.onClickDelete),d=a.onClickEdit,v=a.previewText,h=(0,r.useContext)(o.ADD_SNIPPET_CALLBACK).value,w=(0,i.useStateIfMounted)(!f.text),x=w[0],b=w[1],k=(0,t.addHookName)((0,r.useRef)(!1),"is_right_click"),y=(0,i.useValueRef)(null==f?void 0:f.options),C=(0,r.useCallback)(function(t){var e=f.text,r=void 0===e?"":e,o=f.options,n=o.prefix,i=o.space_before,a=o.default_count;if(2===(null==t?void 0:t.button))t.preventDefault(),k.current=!0,h(r,(null==t?void 0:t.initialClick)?"start":void 0);else if(null==t?void 0:t.initialClick){h((i?" ":"")+(n||"")+r.repeat(a||1),"start")}else h(r)},[h,f]),m=(0,r.useCallback)(function(){var t,e,r=null!==(t=y.current)&&void 0!==t?t:{},o=r.space_after,n=r.suffix,i=void 0===n?"":n;k.current||!i&&!o?h("","end"):h(i+(o?" ":""),"end"),k.current=!1,null===(e=document.getElementById("tts-editor-input"))||void 0===e||e.focus()},[h]),O=(0,i.useHoldClick)(C,m,100);return e.h("li",{className:"tts-scratch-row","data-edit":""+x},e.h("div",{className:"tts-scratch-row-left"},e.h("button",l({type:"button",className:"icon-button tts-scratch-row-control tts-scratch-row-control-add",title:"Add to message"},O,{onContextMenu:function(t){return t.preventDefault()}}),e.h("i",{className:"fas fa-plus"})),e.h("div",{className:"tts-scratch-row-text"},(null===(s=f.options)||void 0===s?void 0:s.prefix)?e.h("span",{className:"tts-scratch-row-text-prefix"},f.options.prefix):null,null!==(u=f.text)&&void 0!==u?u:" ",(null===(c=f.options)||void 0===c?void 0:c.suffix)?e.h("span",{className:"tts-scratch-row-text-suffix"},f.options.suffix):null)),e.h(n.ScratchRowControls,{row:f,open:x,setOpen:b,onClickEdit:d,onClickDelete:p,previewText:v}))};exports.ScratchRow=u;
},{"preact/devtools":"nR5O","preact":"aSor","preact/hooks":"MwGB","~/model":"p5UI","~/view/components":"AOf9","~/view/utils":"YORt"}],"xCND":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScratchRowControls=void 0;var t=r(require("preact")),e=require("preact/hooks"),o=require("~/view/utils");function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(n=function(t){return t?o:e})(t)}function r(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var o=n(e);if(o&&o.has(t))return o.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in t)if("default"!==c&&Object.prototype.hasOwnProperty.call(t,c)){var s=a?Object.getOwnPropertyDescriptor(t,c):null;s&&(s.get||s.set)?Object.defineProperty(r,c,s):r[c]=t[c]}return r.default=t,o&&o.set(t,r),r}var a={once:!0},c=function(n){var r=n.row,c=n.open,s=n.setOpen,i=n.onClickEdit,u=n.onClickDelete,l=n.previewText,f=r.text,p=r.options,d=p.prefix,h=void 0===d?"":d,b=p.default_count,v=p.suffix,w=void 0===v?"":v,m=(0,o.useRequestStatus)(l),C=m[0],y=m[1];(0,e.useEffect)(function(){if(c){var t=function(){setTimeout(function(){return s(!1)},50)};return window.addEventListener("mouseup",t,a),function(){window.removeEventListener("mouseup",t,a)}}},[c]);var k=(0,e.useCallback)(function(){confirm("Are you sure you want to delete this snippet?")&&u()},[u]),N=(0,o.useCopyToClipboard)(""+h+f.repeat(b||1)+w),x=(0,o.useCopyToClipboard)(r.text.repeat(Math.round((b||2)/2)));return t.h("div",{className:"tts-scratch-row-controls","data-open":""+c},t.h("button",{className:"tts-scratch-row-control icon-button tts-scratch-row-controls-button",onClick:function(){return s(!c)}},t.h("i",{className:"fas fa-cog"})),t.h("div",{className:"tts-scratch-row-controls-menu"},t.h("button",{className:"icon-button tts-scratch-row-control",title:"Listen",onClick:function(){return y(r,b)},disabled:C.pending},t.h("i",{className:"fas fa-volume-up"})),t.h("button",{className:"icon-button tts-scratch-row-control",title:"Copy to Clipboard",onClick:N,onAuxClick:x,onContextMenu:function(t){t.preventDefault(),x()}},t.h("i",{className:"fas fa-clipboard"})),t.h("button",{className:"icon-button tts-scratch-row-control",title:"Edit",onClick:i},t.h("i",{className:"fas fa-edit"})),t.h("button",{className:"icon-button tts-scratch-row-control",title:"Delete",onClick:k},t.h("i",{className:"fas fa-trash"}))))};exports.ScratchRowControls=c;
},{"preact":"aSor","preact/hooks":"MwGB","~/view/utils":"YORt"}],"c4i5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScratchRowEdit=void 0;var e=require("preact/devtools"),t=o(require("preact")),a=require("preact/hooks"),n=require("~/view/components"),s=require("~/view/utils");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var r=s?Object.getOwnPropertyDescriptor(e,o):null;r&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}var r={text:"",promise:new Promise(function(){}),data:""},l=function(i){var o,l,u,c,p,d,f,h,m=i.row,v=void 0===m?{}:m,b=i.updateRow,N=i.dismiss,x=(0,s.useStateIfMounted)(null!==(o=v.text)&&void 0!==o?o:""),y=x[0],g=x[1],k=(0,s.useStateIfMounted)(null!==(u=null===(l=v.options)||void 0===l?void 0:l.prefix)&&void 0!==u?u:""),w=k[0],S=k[1],I=(0,s.useStateIfMounted)(null!==(p=null===(c=v.options)||void 0===c?void 0:c.suffix)&&void 0!==p?p:""),M=I[0],O=I[1],_=(0,s.useStateIfMounted)((null===(d=v.options)||void 0===d?void 0:d.default_count)||1),P=_[0],R=_[1],j=(0,s.useStateIfMounted)(null===(f=v.options)||void 0===f?void 0:f.space_before),C=j[0],D=j[1],q=(0,s.useStateIfMounted)(null===(h=v.options)||void 0===h?void 0:h.space_after),W=q[0],E=q[1],A=(0,s.usePlaySnippet)("snippet-modal-player",r),T=A[0],B=A[1],H=A[2],J=(0,e.addHookName)((0,a.useRef)(),"input_ref");(0,a.useEffect)(function(){var e;null===(e=J.current)||void 0===e||e.focus()},[]);var z={text:y,options:{prefix:w,suffix:M,default_count:P,space_before:C,space_after:W}};return t.h("div",{className:"modal-backdrop"},t.h("div",{className:"modal tts-scratch-modal"},t.h("div",{className:"modal-header"},t.h("h3",null,v.text?"Edit":"Create New"," Snippet"),t.h("button",{className:"icon-button modal-close",onClick:N},t.h("i",{className:"fas fa-times"}))),t.h("div",{className:"modal-body"},t.h("div",{className:"row tts-scratch-modal-text"},t.h("label",{className:"tts-scratch-modal-prefix",title:"Some snippets need to start with a different string than the repeated characters (e.g. the 'y' in yDRDRDR)."},t.h("span",null,"Prefix"),t.h("input",{ref:J,value:w,onInput:function(e){return S(e.target.value)}})),t.h("label",{className:"tts-scratch-modal-input"},t.h("span",null,"Main Text"),t.h("input",{ref:J,value:y,onInput:function(e){return g(e.target.value)}})),t.h("label",{className:"tts-scratch-modal-suffix",title:"Text to insert after all repetitions of the snippet (e.g. punctuation)"},t.h("span",null,"Suffix"),t.h("input",{ref:J,value:M,onInput:function(e){return O(e.target.value)}})),t.h("button",{className:"icon-button",onClick:function(){return H(z)},disabled:!y},t.h("i",{className:"fas fa-volume-up"})),t.h("div",{className:"tts-submit-status"},B.pending?t.h("i",{className:"fas fa-circle-notch"}):B.success?t.h("i",{className:"fas fa-check-circle"}):B.error?t.h("i",{className:"fas fa-exclamation-circle"}):null)),t.h("div",{className:"row"},t.h(n.AudioPlayer,{id:"snippet-modal-player",data:T}),B.error&&t.h("p",{className:"error"},JSON.stringify(B.error,null,2))),t.h("h4",null,"Options"),t.h("div",{className:"row"},t.h("label",{className:"tts-scratch-modal-checkbox",title:"When adding this snippet to the message, put a space between the existing text and the snippet."},t.h("input",{type:"checkbox",checked:C,onInput:function(e){return D(e.target.checked)}}),"Space Before"),t.h("label",{className:"tts-scratch-modal-checkbox",title:"When adding this snippet to the message, put a space after the snippet."},t.h("input",{type:"checkbox",checked:W,onInput:function(e){return E(e.target.checked)}}),"Space After"),t.h("label",{className:"tts-scratch-modal-count",title:"By default, the snippet's main text will be repeated this many times. This can be overridden in the Snippet sidebar."},t.h("input",{type:"number",value:P,min:1,max:20,step:1,onInput:function(e){var t=e.target.valueAsNumber;isNaN(t)||R(t)}}),"Default Repeat Count"))),t.h("div",{className:"modal-footer"},t.h("button",{className:"btn",onClick:N},"Cancel"),t.h("button",{className:"btn btn-primary",onClick:function(){b(z),N()},disabled:!y},"Save"))))};exports.ScratchRowEdit=l;
},{"preact/devtools":"nR5O","preact":"aSor","preact/hooks":"MwGB","~/view/components":"AOf9","~/view/utils":"YORt"}],"wk27":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Scratch=void 0;var e=o(require("preact")),t=require("preact/hooks"),r=require("~/model"),n=require("~/view/components"),a=require("~/view/utils");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var c=a?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(n,o,c):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var c=function(){return(c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},u={text:"",promise:new Promise(function(){}),data:""},s=function(){var i,o=(0,a.useContextState)(r.SCRATCH),s=o[0],l=o[1],p=(0,a.useStateIfMounted)(void 0),f=p[0],d=p[1],h=(0,t.useCallback)(function(e,t){var r=null==s?void 0:s.slice();r[e]=t,l(r.filter(function(e){return!!e}))},[s]),v=(0,t.useCallback)(function(e){if(null!=f){var t=s[f];h(f,c(c({data:[],open:!1},t),{name:e}))}},[f,h,s]),y=(0,t.useCallback)(function(){null!=f&&(h(f),d(void 0))},[h,f]),b=(0,a.usePlaySnippet)("scratch-sidebar-player",u),m=b[0],S=b[2];return e.h("div",{className:"tts-scratch"},e.h("div",{className:"row tts-scratch-header"},e.h("h4",null,"Scratch Pad"),e.h("button",{className:"tts-scratch-add-section icon-button",type:"button",onClick:function(){var e;return d(null!==(e=null==s?void 0:s.length)&&void 0!==e?e:0)},title:"Create a new group of snippets"},e.h("i",{className:"fas fa-plus"}))),e.h("div",{className:"tts-scratch-section-list"},s.map(function(t,r){return e.h(n.ScratchSection,{key:r,section:t,updateSection:function(e){return h(r,e)},onClickEdit:function(){return d(r)},previewText:S})})),e.h(n.AudioPlayer,{id:"scratch-sidebar-player",className:"tts-scratch-sidebar-player invisible",data:m}),null!=f&&(0,a.useModal)(e.h(n.ScratchSectionModal,{name:null===(i=s[f])||void 0===i?void 0:i.name,setName:v,dismiss:function(){return d(void 0)},deleteSection:y})))};exports.Scratch=s;
},{"preact":"aSor","preact/hooks":"MwGB","~/model":"p5UI","~/view/components":"AOf9","~/view/utils":"YORt"}],"DhBq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScratchSection=void 0;var t=o(require("preact")),e=require("preact/hooks"),n=require("~/view/components"),r=require("~/view/utils");function a(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(a=function(t){return t?n:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=a(e);if(n&&n.has(t))return n.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var c=o?Object.getOwnPropertyDescriptor(t,i):null;c&&(c.get||c.set)?Object.defineProperty(r,i,c):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}var i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},c=function(a){var o,c,s=a.section,u=a.updateSection,l=a.onClickEdit,d=a.previewText,f=(0,r.useStateIfMounted)(null!==(o=s.open)&&void 0!==o&&o),p=f[0],h=f[1],v=(0,e.useCallback)(function(t,e){var n,r,a=null!==(r=null===(n=s.data)||void 0===n?void 0:n.slice())&&void 0!==r?r:[];a[t]=e,u(i(i({},s),{data:a.filter(function(t){return!!t})}))},[u,s]);(0,e.useEffect)(function(){u(i(i({},s),{open:p}))},[p]);var w=(0,r.useStateIfMounted)(void 0),m=w[0],y=w[1];return t.h("div",{className:"tts-scratch-section","data-open":""+p},t.h("div",{className:"tts-scratch-section-header"},t.h("div",{className:"tts-scratch-section-title",onClick:function(){return h(!p)}},t.h("div",{className:"tts-scratch-section-expand"},p?t.h("i",{className:"fas fa-chevron-down"}):t.h("i",{className:"fas fa-chevron-right"})),t.h("span",null,s.name)),p&&t.h("button",{className:"icon-button tts-scratch-section-edit",onClick:l},t.h("i",{className:"fas fa-edit"}))),t.h("ul",null,null===(c=s.data)||void 0===c?void 0:c.map(function(e,r){return t.h(n.ScratchRow,{key:r,row:e,updateRow:function(t){return v(r,t)},onClickDelete:function(){return v(r)},onClickEdit:function(){return y(r)},previewText:d})}),t.h("li",{className:"tts-scratch-row tts-scratch-section-add-row-item"},t.h("button",{className:"tts-scratch-section-add-row",type:"button",onClick:function(){var t,e;return y(null!==(e=null===(t=s.data)||void 0===t?void 0:t.length)&&void 0!==e?e:0)}},t.h("i",{className:"fas fa-plus"}),"Add a Snippet"))),null!=m&&(0,r.useModal)(t.h(n.ScratchRowEdit,{row:s.data[m],updateRow:function(t){return v(m,t)},onClickDelete:function(){return v(m)},dismiss:function(){return y(void 0)}})))};exports.ScratchSection=c;
},{"preact":"aSor","preact/hooks":"MwGB","~/view/components":"AOf9","~/view/utils":"YORt"}],"HfR9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScratchSectionModal=void 0;var e=require("preact/devtools"),t=o(require("preact")),a=require("preact/hooks"),r=require("~/view/utils");function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(n=function(e){return e?a:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=n(t);if(a&&a.has(e))return a.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=e[i]}return r.default=e,a&&a.set(e,r),r}var i=function(n){var o=n.name,i=n.setName,s=n.deleteSection,c=n.dismiss,u=(0,e.addHookName)((0,a.useRef)(),"input_ref"),l=(0,r.useStateIfMounted)(o),d=l[0],f=l[1],p=(0,a.useCallback)(function(){confirm("Are you sure you want to delete this group and all snippets in it?")&&(s(),c())},[]);return(0,a.useEffect)(function(){var e;return null===(e=u.current)||void 0===e?void 0:e.focus()},[]),t.h("div",{className:"modal-backdrop"},t.h("div",{className:"modal tts-scratch-section-modal"},t.h("div",{className:"modal-header"},t.h("h3",null,o?"Edit":"Create New"," Snippet Group"),t.h("button",{className:"icon-button modal-close",onClick:c},t.h("i",{className:"fas fa-times"}))),t.h("div",{className:"modal-body"},t.h("label",{className:"tts-scratch-section-modal-input"},t.h("span",null,"Group Name"),t.h("input",{ref:u,value:d,onInput:function(e){return f(e.target.value)}})),o&&t.h("button",{className:"btn btn-negative btn-with-icon",onClick:p},t.h("i",{className:"fas fa-trash"}),"Delete Group")),t.h("div",{className:"modal-footer"},t.h("button",{className:"btn",onClick:c},"Cancel"),t.h("button",{className:"btn btn-primary",onClick:function(){i(d),c()},disabled:!d},"Save"))))};exports.ScratchSectionModal=i;
},{"preact/devtools":"nR5O","preact":"aSor","preact/hooks":"MwGB","~/view/utils":"YORt"}],"Z2RM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Row");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./RowControls");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./RowEdit");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var o=require("./Scratch");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}}))});var n=require("./Section");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}}))});var u=require("./SectionEdit");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===u[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}}))});
},{"./Row":"xRVA","./RowControls":"xCND","./RowEdit":"c4i5","./Scratch":"wk27","./Section":"DhBq","./SectionEdit":"HfR9"}],"DqsT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("preact/devtools"),t=i(require("preact")),r=require("preact/compat"),n=require("preact/hooks"),a=require("~/model"),u=require("~/view/components"),o=require("~/view/utils");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=a?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}var l=function(){var r=(0,o.useContextState)(a.MESSAGES),s=r[0],i=r[1],l=(0,o.useContextState)(a.LOADED_MESSAGE),c=l[0],d=l[1],f=(0,n.useContext)(a.EDITOR_STATE).value,v=f.text,p=f.speed,m=f.max_length,h=(0,o.useContextState)(a.EDITOR_UNSAVED),g=h[0],x=h[1],E=s[c],O=(0,n.useMemo)(function(){var e,t;return E?E.text!==v||(null===(e=E.options)||void 0===e?void 0:e.speed)!==p||(null===(t=E.options)||void 0===t?void 0:t.max_length)!==m:!!v},[E,v,p,m]);(0,n.useEffect)(function(){x(O)},[O]);var _=(0,e.addHookName)((0,n.useRef)(null),"load_when_unsaved_reset"),y=(0,o.useValueRef)(s),M=(0,n.useCallback)(function(e,t){var r;void 0===e&&(e=-1);var n=y.current.findIndex(function(e){return e.name===(null==t?void 0:t.name)});if(n>-1&&n!==e)return alert("A message with this name already exists."),!1;var a=null===(r=y.current)||void 0===r?void 0:r.slice();a[-1===e?y.current.length:e]=t;var u=a.filter(function(e){return!!e});return i(u),_.current=t?-1===e?u.length-1:u.findIndex(function(e){return e.name===(null==t?void 0:t.name)}):-1,x(!t),!0},[s]);return(0,n.useEffect)(function(){var e=_.current;null==e||g&&-1!==e||(d(e,-1===e),_.current=null)},[g]),t.h("div",{className:"tts-container"},t.h("div",{className:"tts-container"},t.h("div",{className:"tts-col tts-col-messages"},t.h(u.MessagesList,{updateMessages:M})),t.h("div",{className:"tts-col tts-col-main"},t.h(u.Editor,{message:E,updateMessages:M})),t.h("div",{className:"tts-col tts-col-scratch"},t.h(u.Scratch,null))))},c=(0,r.memo)(l);exports.default=c;
},{"preact/devtools":"nR5O","preact":"aSor","preact/compat":"AQ6k","preact/hooks":"MwGB","~/model":"p5UI","~/view/components":"AOf9","~/view/utils":"YORt"}],"AOf9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={View:!0};Object.defineProperty(exports,"View",{enumerable:!0,get:function(){return p.default}});var t=require("./App");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===t[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var r=require("./context");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===r[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var o=require("./common");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===o[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return o[t]}}))});var n=require("./editor");Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===n[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return n[t]}}))});var u=require("./messages");Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===u[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return u[t]}}))});var c=require("./scratch");Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===c[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return c[t]}}))});var p=s(require("./View"));function s(e){return e&&e.__esModule?e:{default:e}}
},{"./App":"nWoM","./context":"BcoN","./common":"Qr85","./editor":"Yncg","./messages":"hurr","./scratch":"Z2RM","./View":"DqsT"}],"iUHz":[function(require,module,exports) {
"use strict";require("preact/debug");var e=n(require("preact")),t=require("~/view/components");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var u={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(u,a,i):u[a]=e[a]}return u.default=e,n&&n.set(e,u),u}var u=document.getElementById("app");u&&e.render(e.h(t.App,null),u,u.lastElementChild||void 0);
},{"preact/debug":"jYgX","preact":"aSor","~/view/components":"AOf9"}]},{},["iUHz"], null)
//# sourceMappingURL=/app.d075a6ec.js.map